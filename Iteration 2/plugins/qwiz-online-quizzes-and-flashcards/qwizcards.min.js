window.console||(window.console={log:function(){}}),qcard_={};var qcardf=function(){var qname="qcard_",debug=[];debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1),debug.push(!1);var $=jQuery;this.no_intro_b=[],this.qwizard_b=!1,this.qrecord_b=!1,this.dataset_b=!1,this.ruled_lines="img:data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAf4AAAE2CAIAAAAPtmerAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEnklEQVR4nO3YMW1AMRQEwTgyf3ix9Mm8sLCLnUFw1Ra3ZuYHgJLf1wMAuE36AXKkHyBH+gFypB8gR/oBcqQfIEf6AXKkHyBH+gFypB8gR/oBcqQfIEf6AXKkHyBH+gFypB8gR/oBcqQfIEf6AXKkHyBH+gFypB8gR/oBcqQfIEf6AXKkHyBH+gFypB8gR/oBcqQfIEf6AXKkHyBH+gFypB8gR/oBcqQfIEf6AXKkHyBH+gFypB8gR/oBcqQfIEf6AXKkHyBH+gFypB8gR/oBcqQfIGf//P293gDAVWtmXm8A4CqHD0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+Ts883rDQBctWakH6DF4QOQI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA5+3zzegMAV60Z6QdocfgA5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9Azj7fvN4AwFVrRvoBWhw+ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkLPPN683AHDVmpF+gBaHD0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+Ts883rDQBctWakH6DF4QOQI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA5+3zzegMAV60Z6QdocfgA5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9Azj7fvN4AwFVrRvoBWhw+ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkLPPN683AHDVmpF+gBaHD0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+RIP0CO9APkSD9AjvQD5Eg/QI70A+Ts883rDQBctWakH6DF4QOQI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA50g+QI/0AOdIPkCP9ADnSD5Aj/QA5/8mNPTHI1j+2AAAAAElFTkSuQmCC",this.preview=!1,this.any_pay_deck_f=!1,this.n_textentry_hangman=1;var q=this,qqc;q.processing_complete_b=!1;var content="body",default_use_dict="true",default_use_terms="true",hint_timeout_sec=20,default_hangman_max_hints=2,post_id=0,errmsgs=[],n_decks=0,qwizcards_page_f=!1,deck_id,deckdata=[],next_button_active_b=!1,textentry_i_deck,loaded_metaphone_js_b=!1,default_textentry_terms_metaphones,current_card_textentry_terms_metaphones={},textentry_answers={},textentry_answer_metaphones={},textentry_matches={},lc_textentry_matches={},Tcheck_answer_message,show_hint_timeout={},suppress_hangman_hint_b=!1,q_and_a_text="",panel_exit_mobile_open_b=!1,panel_exit_mobile_just_closed_b,non_mobile_scrollLeft,non_mobile_scrollTop,mobile_i_deck,qw,set_qwizard_data_b=!1,chromebook_b=-1!=navigator.appVersion.indexOf("CrOS"),mp3_jplayer_warning_f;function dialog_no_credit_html(){return htm=[],htm.push('<div id="qwizcards_dialog_no_credit" title="Are you doing the right flashcard deck?">'),htm.push('<p style="margin-bottom: 1em;">'),htm.push("Note: this flashcard deck has not been assigned as work you need to do."),htm.push("We&rsquo;ll record your work, but it may not count for your class."),htm.push("</p>"),htm.push("<p>"),htm.push("Please check with your teacher whether they assigned this flashcard deck to your class."),htm.push("</p>"),htm.join("\n")}function init_preview(e){deckdata[e].no_flip_b=!1;for(var t=deckdata[e].n_cards,a=0;a<t;a++)deckdata[e].i_card=a,q.set_card_front_and_back(e,a,!0);t>1&&q.done(e);setTimeout(function(){for(var a=0,d=q.no_intro_b[e]?0:-1;d<t;d++)a+=$("div.card-container.preview-qdeck"+e+".preview-qcard"+d).outerHeight();t>1&&(a+=$("div.card-container.preview-qdeck"+e+".preview-qcard"+t).outerHeight());deckdata[e].$qcard_window.height(a)},300),$("div.card-container").on("mouseenter",q.set_i_deck_i_card),$("button.qcard_flip").removeAttr("disabled").removeClass("qwiz_button_disabled"),deckdata[e].check_answer_disabled_b=!1,$("div.card-container").css({"margin-top":"10px"})}function button_flip_selector(e){var t="button.flip-qdeck"+e;return q.preview&&(t+="-qcard"+deckdata[e].i_card),t}function get_card_back(e,t,a){void 0===t&&(t=deckdata[e].i_user_card);var d=q.qwizard_b&&deckdata[e].use_dataset_card_ids[t];return a&&(d=!d),q.preview?$(d?"div#qcard_window-qdeck"+e+" div.card-container.preview-qcard"+t+" div.qcard-back  div.qcard_content_size_alt":"div#qcard_window-qdeck"+e+" div.card-container.preview-qcard"+t+" div.qcard-back  div.qcard_content_size"):d?deckdata[e].$qcard_card_back_alt:deckdata[e].$qcard_card_back}function process_html(){$('p:contains("[!]"), :header:contains("[!]")').each(function(){0==$(this).html().search(/\s*(<.+?>)*\s*\[!+\][^]*?\[\/!+\]\s*(<.+?>)*\s*$/m)&&$(this).remove()}),$('p:contains("qdeck"), :header:contains("qdeck")').each(function(){var e=$(this).html();0==e.search(/\s*\[\/{0,1}qdeck[^\]]*\]\s*/m)&&$(this).replaceWith(e)});var e="",t=$("div.qdeck_wrapper"),a=$("div.qdeck_wrapper_fallback");if(t.length)e="div.qdeck_wrapper",a.css({display:"none"});else{if(0==a.length){$("head").append('<style type="text/css">\n.qdeck_wrapper_fallback_visible {\nvisibility: visible;\n}\n</style>\n')}e=content}n_decks=0;var d=0;$(e).each(function(){var e=$(this).html();if(e){if(-1!=e.indexOf("[qdeck")){var a=q.process_html2(e,d);if(e=a.htm,d=a.i_deck,q.qdeckdemos)for(var r=q.qdeckdemos.length,c=0;c<r;c++){var n=q.qdeckdemos[c],i=n.length;n=n.substring(11,i-12),e=e.replace("<qdeckdemo></qdeckdemo>",n)}$(this).html(e),$(this).find("div.qcard_window").on("mouseenter",function(e){if("qcard_window"==e.target.className.toLowerCase())document_active_qwiz_qdeck=e.target;else{var t=$(e.target).parents("div.qcard_window");t.length&&(document_active_qwiz_qdeck=t[0])}debug[7]&&(console.log("[qcard_window mouseenter] e.target:",e.target),console.log("[qcard_window mouseenter] document_active_qwiz_qdeck:",document_active_qwiz_qdeck))})}t.length&&$(this).contents().unwrap()}else;n_decks=d}),$("div.qdeck_wrapper").removeClass("qwiz_shortcodes_hidden");for(d=0;d<n_decks;d++)if(deckdata[d].qrecord_id){var r={qwiz_qdeck:"qdeck",n_questions_cards:deckdata[d].n_cards};qqc.jjax(qname,d,deckdata[d].qrecord_id,"check_registered",r)}n_decks&&!q.qwizard_b&&qqc.init_enter_intercept(),q.qrecord_b&&qqc.set_user_menus_and_icons(),q.processing_complete_b=!0}function create_qwiz_icon_div(e){var t="";qqc.get_qwiz_param("beta")&&(t='style = "background: red;"');var a=[];a.push('<div id="icon_qdeck'+e+'" class="icon_qdeck" '+t+">");var d=qqc.get_qwiz_param("icon_qwiz");if("Not displayed"!=d){"Icon only"!=d&&a.push('<a href="mailto:support@qwizcards.com" style="border: none; box-shadow: none;" target="_blank">');a.push('      <img class="icon_qdeck" style="border: none;" title="Questions, comments, suggestions? support@qwizcards.com" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAUCAIAAAALACogAAAABnRSTlMA/wD/AP83WBt9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABP0lEQVR4nGP8//8/AymAiSTV5GhgwSZ4rcRrxRooW3futlBnJDlGND/cXzXVccFLVP0oepiwqtZJyH2wrenBtogQBgYGhsv9q15j9cO1qTDVW8JEGRgYGBi0PJ0YGBgYrjzCpuH+qv1rGBgYGHQLoaoZGBgYlOTEGRgYGB68uY+h4fXuQy8ZGBgYnLSRvXjv0UsGBgYGBRFFdA1Prm+6x8DAwBBio4XsyO37GBgYGHTkEHaixYO4mszrWTl1CjmH7iMcKe5nhdAAi4cnL6/A3HbrHgMDw56pJ0QYIOHr5JgmgzASZoOFdggDAwPDy03HRCEhs6YJEne6c0uQHYkUcXt76pL3oTqQQbxqVjay8Sh+cC5pmuuEpkFMWQZNBCNpwMDrWTmT2+5hCCu54EqtomkVLjqYwgoiuGzACWifgQDhK2rq5bcX2gAAAABJRU5ErkJggg==" />'),"Icon only"!=d&&a.push("</a>")}return a.push("</div>"),a.join("")}function process_card_input(e,t,a){var d={got_it:!1},r=a;debug[1]&&console.log("[process_card_input] card_front_and_back_html: ",r);var c=qqc.opening_tag_shortcode_pos("[a]",r),n=r.substr(0,c);if(deckdata[e].qrecord_id)if(qqc.isInteger(deckdata[e].dataset_id[t])){var i=qqc.remove_tags_eols(r);deckdata[e].q_and_a_text[t]=qqc.q_and_a_hash(i)}else deckdata[e].q_and_a_text[t]=deckdata[e].dataset_id[t];set_qwizard_data_b&&(qw.questions_cards[t].type="simple_card",qw.questions_cards[t].question_text=n);var _=!1;-1!=n.indexOf("[textentry")&&(n=card_front_textentry_html(n,e),_=!0,set_qwizard_data_b&&(qw.questions_cards[t].type="optional_textentry")),d.card_front=n;var s=r.substr(c);debug[0]&&console.log("[process_card_input] card_back_html: ",s);var o="";if(s){var l=s.indexOf("[a]");o=s.substr(0,l),s=s.substr(l+3)}else if(!deckdata[e].use_dataset_card_ids[t]){var h=a.length>150?" ...":"";errmsgs.push(T('Did not find answer ("[a]" -- card back)')+".  qdeck: "+(e+1)+", "+T("card")+" "+(t+1)+"\n"+a.substr(0,150)+h),s=""}q.qwizard_b&&-1!=s.indexOf('<span class="qwizard_placeholder">')&&errmsgs.push(T("Did not enter answer text -- card back")+".  qdeck: "+(e+1)+", "+T("card")+" "+(t+1)+"\n"+a),set_qwizard_data_b&&(qw.questions_cards[t].answer_text=o+s);var k=s.split(/\[a\]/);if(1!=k.length&&errmsgs.push(T('Got more than one answer ("[a]") -- card back')+".  qdeck: "+(1+e)+", "+T("card")+" "+(1+t)+"\n"+a),deckdata[e].qrecord_id&&qqc.isInteger(deckdata[e].dataset_id[t])){i=qqc.q_and_a_hash(qqc.remove_tags_eols(k[0]));deckdata[e].q_and_a_text[t]+="\n"+i}return d.card_back=create_card_back_html(e,t,k[0],o,_),d}function process_textentry(e,t,a){var d={got_it:!1},r="",c=qqc.opening_tag_shortcode_pos("([c]|[c*])",a);c==a.length?errmsgs.push(T("No answer-word given")+".  qdeck: "+(1+e)+", "+T("card")+" "+(1+t)):r=a.substr(0,c),set_qwizard_data_b&&(qw.questions_cards[t].question_text=r,qw.questions_cards[t].choices=[],qw.questions_cards[t].correct_choice_fs=[],qw.questions_cards[t].feedbacks=[]);var n,i=!1,_=3,s="true"==default_use_dict,o="true"==default_use_terms,l=!1,q=r.match(/\[textentry([^\]]*)\]/m);if(q){var h=q[1];if(h){i="true"==get_attr(h=qqc.replace_smart_quotes(h),"plural");var k=get_attr(h,"minlength");""!=k&&(_=k);var u=get_attr(h,"use_terms");u&&(o="false"!=u);var p=get_attr(h,"use_dict");p&&(s="false"!=p),l="true"==get_attr(h,"single_char")}}else errmsgs.push(T("Free-form input choices [c] or [c*] card does not have [textentry]")+".  qdeck: "+(1+e)+", "+T("card")+" "+(1+t));set_qwizard_data_b&&(qw.questions_cards[t].type=l?"one_letter_answer":"textentry",qw.questions_cards[t].textentry_attributes=h);var m="";l?(n="qcard_single_char_entry",m='style="width: 2em;" '):n="qcard_textentry";var g='<div class="'+n+'">\n<input type="text" class="textentry-qdeck'+e+' autocomplete="off" '+n+'" '+m+'onfocus="'+qname+'.set_textentry_i_deck (this)" />\n<button id="textentry_hint-qdeck'+e+'" class="qwiz_button textentry_hint" onclick="'+qname+".textentry_hint ("+e+')" disabled>'+T("Hint")+"</button>\n</div>\x3c!-- END --\x3e\n";a=a.replace(/\[textentry([^\]]*)\]/,g),debug[0]&&console.log("[process_textentry] htm:",a);var b=["[c]","[c*]"],f=["[c]","[c*]","[x]"],v=qqc.opening_tag_shortcode_pos("([c]|[c*])",a),w=a.substr(v);if(a=a.substr(0,v),d.card_front=a,d.textentry_required_b=!0,deckdata[e].qrecord_id)if(qqc.isInteger(deckdata[e].dataset_id[t])){var y=a.replace(/<button[^]*Hint.[^]?<\/button>/,"");y=qqc.remove_tags_eols(y+w),deckdata[e].q_and_a_text[t]=qqc.q_and_a_hash(y)}else deckdata[e].q_and_a_text[t]=deckdata[e].dataset_id[t];d.choices=[],d.textentry_plural_b=i,d.textentry_minlength=_,d.use_terms_b=o,d.use_dict_b=s,d.single_char_b=l,d.feedback_htmls=[],d.all_choices=[],d.card_back="";set_qwizard_data_b&&(qw.questions_cards[t].textentry_plural_b=i);for(var x=0,A=!1;;){var z=qqc.parse_html_block(w,b,f);if("NA"==z)break;w=w.substr(z.length);var C=process_feedback_item(z);if(z=C.choice_html,C.feedback_html)!0,d.feedback_htmls.push(C.feedback_html),process_feedback_item(z).feedback_html&&errmsgs.push(T("More than one answer or feedback shortcode [a] or [f] given with [textentry] choice")+".  qdeck: "+(1+e)+", "+T("card")+" "+(1+t)+", "+T("choice")+" "+(1+x));else errmsgs.push(T("Did not get answer/feedback [a] or [f] for [textentry] choice")+".  qdeck: "+(1+e)+", "+T("card")+" "+(1+t)+", "+T("choice")+" "+(1+x)),d.feedback_htmls.push("");set_qwizard_data_b&&(qw.questions_cards[t].feedbacks[x]=C.feedback_html),-1==(z=(z=z.replace(/.*\[c\*{0,1}\]/m,"")).replace(/<[^>]+>|\n|&nbsp;/g,"")).replace(";","").search(/\S/)&&errmsgs.push(T("No text given for [textentry] choice")+".  qdeck: "+(e+1)+", "+T("card")+" "+(1+t)+", "+T("choice")+" "+(1+x));for(var $=z.split(/\s*;\s*/),I=[],O=0;O<$.length;O++)-1!=$[O].search(/\S/)&&I.push(qqc.trim($[O]));"*"==I[0]&&(A=!0,""==d.feedback_htmls[x]&&errmsgs.push(T('For [textentry] card, wildcard choice ("*", for any other user entry) must be accompanied by answer/feedback "[a] or [f]"')+".  qdeck: "+(e+1)+", "+T("card")+" "+(1+t)+", "+T("choice")+" "+(1+x))),d.choices.push(I),set_qwizard_data_b&&qw.questions_cards[t].choices.push(I.join(";"));var D=I.length;for(O=0;O<D;O++)-1!=d.all_choices.indexOf(I[O])&&errmsgs.push(T("Entry given in more than one [textentry] choice")+": "+I[O]+".  qdeck: "+(e+1)+", "+T("card")+" "+(1+t)+", "+T("choice")+" "+(1+x));d.all_choices=d.all_choices.concat(I),x++}return set_qwizard_data_b&&(qw.questions_cards[t].n_choices=x),d.card_back="",A&&1==d.choices.length&&errmsgs.push(T('Need to define acceptable entries for [textentry] card in addition to "other entry" choice ([c] *)')+".  qdeck: "+(e+1)+", "+T("card")+" "+(1+t)),debug[6]&&(console.log("[process_textentry] card.choices:",d.choices),console.log("[process_textentry] card.feedback_htmls:",d.feedback_htmls)),d}function process_hangman(e,t,a){var d=-1!=a.indexOf("hangman_img_wrapper"),r=d?"hangman_labeled_diagram":"hangman",c={got_it:!1};c.type=r;var n=a;if(n=n.replace(/(<[^\/][^>]*>\s*)*?\[a\][^]*/m,""),debug[0]&&console.log("[process_hangman] card_front_html: ",n),deckdata[e].qrecord_id)if(qqc.isInteger(deckdata[e].dataset_id[t])){var i=n.replace(/\[hangman[^\]]*\]/g,"_________");deckdata[e].q_and_a_text[t]=qqc.q_and_a_hash(qqc.remove_tags_eols(i))}else deckdata[e].q_and_a_text[t]=deckdata[e].dataset_id[t];var _,s=default_hangman_max_hints,o=!0;if(u=a.match(/\[hangman([^\]]*)\]/m)){var l=u[1];if(l){var h=get_attr(l=qqc.replace_smart_quotes(l),"hints");h&&(-1==h.search(/[^0-9]/)?s=parseInt(h):errmsgs.push(T('"hints" for [hangman] should be a number')+".  qdeck: "+(1+e)+", "+T("card")+" "+(1+t))),o=!("false"==get_attr(l,"type_letters"))}}var k=n.search(/(<[^\/][^>]*>\s*)*?\[c\*{0,1}\]/m);-1==k?(errmsgs.push(T("Did not get [c] or [c*] (hangman answer) with [hangman]")+".  qdeck: "+(1+e)+", "+T("card")+" "+(1+t)),k=0,_=n):_=n.substr(0,k),set_qwizard_data_b&&(qw.questions_cards[t].type=r,qw.questions_cards[t].hangman_attributes=l,qw.questions_cards[t].question_text=_,qw.questions_cards[t].choices=[],qw.questions_cards[t].feedbacks=[]),debug[9]&&console.log("[process_hangman] question_htm:",_);for(var u,p=(u=_.match(/\[hangman/g)).length,m=n.substr(k),g=["[c]","[c*]"],b=["[c]","[c*]","[x]"],f=0;;){var v="",w=0,y=qqc.parse_html_block(m,g,b);if("NA"==y)break;m=m.substr(y.length);var x=y.match(/\[c\*{0,1}\]([^\[]*)/m);x&&(v=(v=x[1]).replace(/<[^>]+>|\n|&nbsp;/g,""),w=(v=qqc.trim(v)).length,debug[9]&&console.log("[process_hangman] hangman_answer:",v)),void 0===deckdata[e].hangman[t]&&(deckdata[e].hangman[t]={}),deckdata[e].hangman[t].hangman_answer||(deckdata[e].hangman[t].hangman_answer=[],deckdata[e].hangman[t].hangman_final_entry=[],deckdata[e].hangman[t].hangman_current_entry=[],deckdata[e].hangman[t].hangman_incorrect_chars=[],deckdata[e].hangman[t].hangman_n_hints=[]),0==f&&(deckdata[e].hangman[t].n_hangman_done=0,deckdata[e].hangman[t].hangman_max_hints=s,deckdata[e].hangman[t].hangman_type_letters=o,deckdata[e].hangman[t].n_hangman=p,deckdata[e].hangman[t].n_hangman_correct=0),deckdata[e].hangman[t].hangman_answer[f]=v,set_qwizard_data_b&&(qw.questions_cards[t].choices[f]=v),deckdata[e].hangman[t].hangman_n_hints[f]=0;var A=qqc.create_hangman_entry(v);deckdata[e].hangman[t].hangman_final_entry[f]=A;var z=new Array(w).join("&ensp;"),C=q.qwizard_b?' onfocus="qwizard.update_hangman_options_menu_choice (this, '+f+')"':"",$="",I="";q.qwizard_b&&"placeholder"==v&&($=" disabled",I=" qwiz_button_disabled");var O='<span class="qdeck_hangman qdeck_hangman_c'+f+'" onkeyup="'+qname+'.hangman_show (this, true)" onmouseenter="'+qname+'.hangman_show (this)" onmouseleave="'+qname+'.hangman_hide (this)"><span class="hangman_current_entry hangman_entry"></span><input type="text" oninput="'+qname+".hangman_keyup (this, event,' "+z+"', "+e+", "+t+", "+f+')" onblur="'+qname+'.hangman_hide (this.parentElement)"'+C+$+" />";if(s){s<v.replace(/[a-z0-9]/i,"").length&&' title="'+T("You can get")+" "+qqc.number_to_word(s)+" "+T("hint")+" "+Tplural("letter","letters",s)+'"',O+='<button id="hangman_hint-qdeck'+e+'" class="qwiz_button hangman_hint'+I+'" onmouseenter="'+qname+'.hangman_show (this.parentElement)" onclick="'+qname+".hangman_hint ("+e+", "+t+", "+f+')" title="'+T("You can get two hint letters")+'">'+T("Hint")+"</button>\n"}o&&!q.qwizard_b&&(!d||d&&0==f)&&(O+='<span class="hangman_type_letters"></span>'),O+='<span class="hangman_status"></span></span>\x3c!-- END --\x3e',_=_.replace(/\[hangman[^\]]*\]/,O),f++}f!=p&&errmsgs.push("Number of [hangman] shortcodes does not match number of hangman words [c].  qdeck: "+(1+e)+", "+T("card")+" "+(1+t)),set_qwizard_data_b&&(qw.questions_cards[t].n_choices=f),c.card_front=_;var D=qqc.opening_tag_shortcode_pos("[a]",a),P=a.substr(D);debug[0]&&console.log("[process_hangman] card_back_html: ",P);var E="";if(P){var j=P.indexOf("[a]");E=P.substr(0,j),P=P.substr(j+3)}else errmsgs.push(T('Did not find answer ("[a]") -- card back -- for')+" qdeck "+(e+1)+", "+T("card")+" "+(t+1)+"\n"+a),P="";var Q=P.split(/\[a\]/);if(1!=Q.length&&errmsgs.push(T('Got more than one answer ("[a]" -- card back)')+".  qdeck: "+(1+e)+", "+T("card")+" "+(1+t)+"\n"+a),deckdata[e].qrecord_id&&qqc.isInteger(deckdata[e].dataset_id[t])){i=qqc.remove_tags_eols(Q[0]);deckdata[e].q_and_a_text[t]+="\n"+qqc.q_and_a_hash(i)}return c.card_back=create_card_back_html(e,t,Q[0],E,!1),set_qwizard_data_b&&(qw.questions_cards[t].answer_text=E+Q[0]),c}function update_hangman_input(e,t,a,d,r,c,n,i){for(var _=!1,s=!1,o=-1,l=new RegExp("u>"+e+"</u","i");;){var h=a.substr(o+1).match(l);if(!h)break;o+=h.index+2,t=qqc.setCharAt(t,o+1,h[0][2]),s=!0}debug[9]&&console.log("[update_hangman_input] keychar:",e,", good_char_b:",s);var k=deckdata[d].hangman[r],u=k.hangman_incorrect_chars[c];if(s){k.hangman_current_entry[c]=t;var p,m=t.replace(/\t/g,"&ensp;");if($(n).siblings("span.hangman_current_entry").html(m),_=-1==t.indexOf("<u>\t</u>")){var g=k.n_hangman;if(k.n_hangman_done++,p=k.n_hangman_done==g,$(n).attr("disabled",!0),n.parentElement.done_f=!0,u.length<=3&&0==k.hangman_n_hints[c]&&k.n_hangman_correct++,p)q.qwizard_b||(deckdata[d].answered_correctly[r]=g==k.n_hangman_correct),$(button_flip_selector(d)).removeAttr("disabled").removeClass("qwiz_button_disabled").html(T("Flip")),deckdata[d].check_answer_disabled_b=!1,i||q.qdeck_flip(d);else{var b=!0;for(c=0;c<g;c++)if(k.hangman_current_entry[c]!=k.hangman_final_entry[c]){var f=q.get_card_front(d).find("span.qdeck_hangman.qdeck_hangman_c"+c);b?(f.find("input").focus(),b=!1):f.find("span.hangman_type_letters").show()}}_=!0}}else e=e.toLowerCase(),-1==u.indexOf(e)&&(u+=e),k.hangman_incorrect_chars[c]=u,debug[9]&&console.log("[hangman_keyup] hangman_incorrect_chars:",u);return _}function single_char_textentry_keyup(e){var t=e.target;if(debug[6]&&console.log("[single_char_textentry_keyup] input_el:",t),-1==t.value.search(/[a-z0-9]/i))return t.value="",!1;var a=t.className.match(/textentry-qdeck([0-9]+)/)[1];q.qdeck_flip(a)}function process_feedback_item(e){var t=qqc.parse_html_block(e,["[a]","[f]"],["[a]","[f]","[x]"]);return"NA"!=t?(e=e.replace(t,""),t=t.replace(/\[[af]\]/,""),debug[2]&&console.log("[process_feedback_item] feedback_html: ",t)):t="",debug[2]&&(console.log("[process_feedback_item] feedback_html:",t),console.log("[process_feedback_item] choice_html:",e)),{feedback_html:t,choice_html:e}}function create_card_back_html(e,t,a,d,r){var c=d+a;if(-1!=a.search(/\[.*textentry.*/))r||errmsgs.push(T("[textentry] on back of card, but not on front")+".  qdeck: "+(e+1)+", "+T("card")+" "+(t+1)),c=card_back_textentry_html(c,e);else if(r){var n="";q.preview&&(n=" preview-qcard"+deckdata[e].i_card),c='<p class="back_textentry_p-qdeck'+e+" back_textentry_p"+n+'">'+T("You wrote")+' &ldquo;<span class="back_qcard_textentry back_textentry-qdeck'+e+n+'">&emsp;&emsp;&emsp;&emsp;&emsp;</span>&rdquo;</p>'+c}return debug[2]&&console.log("[create_card_back_html] new_html:",c),c}function process_header(e,t,a){var d=["[q]","[q "];null!=a&&d.push("[i]");var r=qqc.parse_html_block(e.substr(0,1e3),["[h]"],d,!0);if("NA"==r&&(r=""),r){var c=e.substr(0,200);c=qqc.trim(c);var n=qqc.opening_tag_shortcode_pos("[h]",c);c=c.substr(n,5);var i=r.replace(/<br[^>]*>/g,"");c!=(i=qqc.trim(i).substr(0,5))&&errmsgs.push(T("Text before header")+" [h].  qdeck: "+(t+1)),e=e.replace(r,""),r=r.replace(/\[h\]/gi,""),r=(r=qqc.balance_closing_tag(r)).replace(/<(p|h[1-6])[^>]*><\/(p|h[1-6])>/g,""),r=qqc.decode_image_tags(r)}return deckdata[t].header_html=r,e}function create_qdeck_divs(e,t){debug[0]&&console.log("[create_qdeck_divs] i_deck:",e);var a=t.match(/\[qdeck([^\]]*)\]/m),d=a[1];if(deckdata[e].scroll_b||document_qwiz_mobile||(deckdata[e].card_width_setting="500px",deckdata[e].card_height_setting="300px"),d){var r;if(-1!=(d=qqc.replace_smart_quotes(d)).search(/style\s*?=/m))-1!=d.search(/["\s;]width/)&&(r=new RegExp('width\\s*:\\s*([^;\\s"]*)[;\\s"]'),(a=d.match(r))&&(deckdata[e].card_width_setting=a[1],d=d.replace(r,""))),-1!=d.search("height")&&(r=new RegExp('(min-)*height\\s*:\\s*([^;\\s]*)[;\\s"]'),(a=d.match(r))&&(deckdata[e].card_height_setting=a[2],d=d.replace(r,"")));deckdata[e].random_b="true"==get_attr(d,"random"),debug[0]&&console.log("[create_qdeck_divs] random_b:",deckdata[e].random_b)}d=d.replace(/align\s*=\s*"[^"]*"/,""),debug[0]&&console.log("[create_qdeck_divs] attributes: ",d);var c=[],n="";deckdata[e].scroll_b||document_qwiz_mobile||(n="width: "+deckdata[e].card_width_setting+"; height: "+deckdata[e].card_height_setting+"; "),n+="z-index: "+Math.max(99-e,1)+";";var i=deckdata[e].align;if("center"==i?n+=" margin: auto;":"right"==i?n+=" margin-left: auto;":"tiled"==i&&(n+=" float: left;"),deckdata[e].spacing&&(n+=" margin-right: "+deckdata[e].spacing+"px;"),c.push('<div id="qcard_window-qdeck'+e+'" class="qcard_window visibilityhidden" style="'+n+'">'),c.push('<div id="overlay-exit-mobile-qdeck'+e+'" class="overlay-exit-mobile-qwiz" onclick="'+qname+'.close_panel_exit_mobile(this)">'),c.push('<div id="panel-exit-mobile-qdeck'+e+'" class="panel-exit-mobile-qwiz">'),c.push('<button onclick="'+qname+".exit_mobile ("+e+')">'),c.push("Back to page view"),c.push("</button>"),c.push("<br />"),c.push("<span>"),c.push("(To return to this full-screen view, tap "),c.push('<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAk0lEQVR4nI3QMQ6EIBAF0BG2YLiGtjRcgt7EcBfDhShtbLwBHIgCJrPFbrGJqPvrl/k/MzAzPOUFAMYYRCSiaZpijGckAAARSynM3BVf1FpTSkkpQwiXaBzHnLNzbtu2Lhr+GS4exSUyxqzrCgDLssDnBefM87zv+3EcRHS3yVpba0XElFK/znsvhNBal1LuLv3mDbu1OYLB67+mAAAAAElFTkSuQmCC" />'),c.push(")"),c.push("</span>"),c.push('<div class="panel-icon-exit-mobile-qwiz" style="margin-left: -5px;"></div>'),c.push("</div>"),c.push("</div>"),c.push('<div id="icon-exit-mobile-qdeck'+e+'" class="icon-exit-mobile-qwiz" onclick="'+qname+".open_panel_exit_mobile ("+e+')"></div>'),c.push('   <div id="qcard_progress-qdeck'+e+'" class="qcard_progress">'),c.push('<div class="go-mobile-qdeck go-mobile-qdeck'+e+'" onclick="'+qname+".go_mobile ("+e+')" title="Full-screen view">'),c.push("</div>"),c.push('<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAKwmlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y2WEAEpofcuXUroAZReRSUkgYQSY0JQsSviCCqKiAiWoQxVwUEpMhbEgm1QbNgnyKCiPgcLNlTeBYYw89567633r3XW/e6+++y9z1nnrLUvABQ8WyTKgJUAyBRmiSMCvBlx8QkM3O8AAligChSAHpsjETHDwkIAounn3/XhDuKN6KblRKx///5fpczlSTgAQGEIJ3MlnEyEjyHjNUckzgIAVY3Y9ZdliSb4IsI0MVIgwg8nOHWKRyY4eZLR6EmfqAgfhNUAwJPZbHEqAGQDxM7I5qQicci+CNsIuQIhwsg78ODw2VyEkbzAIjNzyQTLEDZJ/kuc1L/FTJbHZLNT5Ty1lknhfQUSUQZ7xf+5Hf9bmRnS6RxGyCDzxYERyJOO7Nnd9CXBchYmzw+dZgF30n+S+dLA6GnmSHwSppnL9g2Wz82YHzLNKQJ/ljxOFitqmnkSv8hpFi+JkOdKEfswp5ktnskrTY+W2/k8ljx+Dj8qdpqzBTHzp1mSHhk84+Mjt4ulEfL6ecIA75m8/vK1Z0r+sl4BSz43ix8VKF87e6Z+npA5E1MSJ6+Ny/P1m/GJlvuLsrzluUQZYXJ/XkaA3C7JjpTPzUIO5MzcMPkeprGDwqYZhIAAwADRIANkATFgIxwIkJOaxVs+cUaBzxLRCrEglZ/FYCK3jMdgCTlWFgw7GzsbACbu7NSReHd38i5CdPyMTYJ4uG5DjKIZ20IaAMf4AChwZmxGRch1JAFwNoEjFWdP2SauE8AAIlAENKAOtIE+MAGWwA44AjfgBfxAEAgFUSAeLAIcwAeZSOXLwCqwHuSBArAD7AZl4CCoAnXgMGgB7eAEOAMugCvgOrgNHgAZGAIvwQj4AMYgCMJBFIgKqUM6kCFkDtlBzpAH5AeFQBFQPJQEpUJCSAqtgjZCBVARVAZVQPXQz9Bx6Ax0CeqD7kED0DD0FvoCo2AyTIO1YCPYGnaGmXAwHAUvhFPhpXAOnAtvh0vhSvgQ3Aafga/At2EZ/BIeRQEUCUVH6aIsUc4oH1QoKgGVghKj1qDyUSWoSlQTqhPVg7qJkqFeoT6jsWgqmoG2RLuhA9HRaA56KXoNeiu6DF2HbkOfQ99ED6BH0N8xFIwmxhzjimFh4jCpmGWYPEwJpgbTijmPuY0ZwnzAYrF0rDHWCRuIjcemYVdit2L3Y5uxXdg+7CB2FIfDqePMce64UBwbl4XLw+3FHcKdxt3ADeE+4Ul4Hbwd3h+fgBfiN+BL8A34U/gb+Gf4MYISwZDgSgglcAkrCIWEakIn4RphiDBGVCYaE92JUcQ04npiKbGJeJ74kPiORCLpkVxI4SQBaR2plHSEdJE0QPpMViGbkX3IiWQpeTu5ltxFvkd+R6FQjChelARKFmU7pZ5ylvKY8kmBqmClwFLgKqxVKFdoU7ih8FqRoGioyFRcpJijWKJ4VPGa4islgpKRko8SW2mNUrnScaV+pVFlqrKtcqhypvJW5QblS8rPVXAqRip+KlyVXJUqlbMqg1QUVZ/qQ+VQN1KrqeepQzQszZjGoqXRCmiHab20EVUV1TmqMarLVctVT6rK6Ci6EZ1Fz6AX0lvod+hfZmnNYs7izdoyq2nWjVkf1Wareanx1PLVmtVuq31RZ6j7qaer71RvV3+kgdYw0wjXWKZxQOO8xqvZtNluszmz82e3zL6vCWuaaUZortSs0ryqOaqlrRWgJdLaq3VW65U2XdtLO027WPuU9rAOVcdDR6BTrHNa5wVDlcFkZDBKGecYI7qauoG6Ut0K3V7dMT1jvWi9DXrNeo/0ifrO+in6xfrd+iMGOgbzDFYZNBrcNyQYOhvyDfcY9hh+NDI2ijXabNRu9NxYzZhlnGPcaPzQhGLiabLUpNLklinW1Nk03XS/6XUz2MzBjG9WbnbNHDZ3NBeY7zfvs8BYuFgILSot+i3JlkzLbMtGywErulWI1QardqvX1gbWCdY7rXusv9s42GTYVNs8sFWxDbLdYNtp+9bOzI5jV253y55i72+/1r7D/s0c8zm8OQfm3HWgOsxz2OzQ7fDN0clR7NjkOOxk4JTktM+p35nmHOa81fmiC8bF22WtywmXz66OrlmuLa5/uFm6pbs1uD2fazyXN7d67qC7njvbvcJd5sHwSPL40UPmqevJ9qz0fOKl78X1qvF6xjRlpjEPMV9723iLvVu9P/q4+qz26fJF+Qb45vv2+qn4RfuV+T321/NP9W/0HwlwCFgZ0BWICQwO3BnYz9JicVj1rJEgp6DVQeeCycGRwWXBT0LMQsQhnfPgeUHzds17ON9wvnB+eygIZYXuCn0UZhy2NOyXcGx4WHh5+NMI24hVET2R1MjFkQ2RH6K8owqjHkSbREuju2MUYxJj6mM+xvrGFsXK4qzjVsddideIF8R3JOASYhJqEkYX+C3YvWAo0SExL/HOQuOFyxdeWqSxKGPRycWKi9mLjyZhkmKTGpK+skPZlezRZFbyvuQRjg9nD+cl14tbzB3mufOKeM9S3FOKUp6nuqfuSh3me/JL+K8EPoIywZu0wLSDaR/TQ9Nr08czYjOaM/GZSZnHhSrCdOG5JdpLli/pE5mL8kSypa5Ldy8dEQeLaySQZKGkI4uGNEdXpSbSTdKBbI/s8uxPy2KWHV2uvFy4/OoKsxVbVjzL8c/5aSV6JWdl9yrdVetXDaxmrq5YA61JXtO9Vn9t7tqhdQHr6tYT16ev/3WDzYaiDe83xm7szNXKXZc7uClgU2OeQp44r3+z2+aDP6B/EPzQu8V+y94t3/O5+ZcLbApKCr5u5Wy9vM12W+m28e0p23sLHQsP7MDuEO64s9NzZ12RclFO0eCuebvaihnF+cXvdy/efalkTsnBPcQ90j2y0pDSjr0Ge3fs/VrGL7td7l3evE9z35Z9H/dz99844HWg6aDWwYKDX34U/Hi3IqCirdKosqQKW5Vd9bQ6prrnJ+ef6ms0agpqvtUKa2V1EXXn6p3q6xs0Gwob4UZp4/ChxEPXD/se7miybKpopjcXHAFHpEde/Jz0852W4Jbuo85Hm44ZHtvXSm3Nb4PaVrSNtPPbZR3xHX3Hg453d7p1tv5i9UvtCd0T5SdVTxaeIp7KPTV+Ouf0aJeo69WZ1DOD3Yu7H5yNO3vrXPi53vPB5y9e8L9wtofZc/qi+8UTl1wvHb/sfLn9iuOVtqsOV1t/dfi1tdext+2a07WO6y7XO/vm9p264XnjzE3fmxdusW5duT3/dt+d6Dt3+xP7ZXe5d5/fy7j35n72/bEH6x5iHuY/UnpU8ljzceVvpr81yxxlJwd8B64+iXzyYJAz+PJ3ye9fh3KfUp6WPNN5Vv/c7vmJYf/h6y8WvBh6KXo59irvH8r/2Pfa5PWxP7z+uDoSNzL0Rvxm/O3Wd+rvat/Ped89Gjb6+EPmh7GP+Z/UP9V9dv7c8yX2y7OxZV9xX0u/mX7r/B78/eF45vi4iC1mT7YCKGTAKSkAvK0FgBIPAPU6AMQFUz31pKCp/4BJAv+Jp/ruSTkCgIQC0V0ATLRoVX+2tIrIe5gXAFFeALa3l48/JUmxt5uKRWpHWpOS8fF3SP+IMwXgW//4+Fj7+Pi3GqTY+wB0fZjq5SekjfxXLMADqHzTrZYB8K/6J1bAD27htQDfAAAACXBIWXMAABYlAAAWJQFJUiTwAAACBGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NDY4PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjQ2NjwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgrdRrnkAAADWklEQVRIDZ1VW08TQRT+uvRqCBoI5ckCD3JRjEALCfFNMJHfIH9B0V+BkIj6omgiEilPBiFyT+TRAAX1wQj0JpBIFYQaa6Db7WWcc8rWBKl2nWR2Z3bOfOf2nbMmfzAk1tfWYLfbkclkABN4KIqCpJZEs7sZ5eVOpFIpmExHh1mRwp53+/uFlMw7P3xcFRkhxGEiIVQtaXiaHQ4HW+LxtCAS2UZxcTHS6TS2IxG8np/HhfP1SEhPFJNSmMXHpJRMhowHYrEfUkEEaiKBcDgMr3cEl9vaEFcTx64Y2yp6zK1WG5wVFUglk4wwNPQMgVAYp+y2bG6M4eakFY6+3MbVOHZ3dqCqKmpqazE5MQGPTHAw/ImVUNj+ZyhWq5XvlZWVoae3F9FoFAG/Hw0NF/EzFkODzIHuicy1cR29fX3MIN/yirwvxIvRUd47nRVCesJrm80mAqGQSMvzQ9UYm/D23Xux6FtmcKIhUXJ0bIyBJf/FpcZGXkvTxe7evkhLgYO4WjBdQVYRaDyh5awjbS/Hxhn4rMvF74ePBvg8kUyxbKE1gd/AGltFIaBvNMZfTTD4wOMnIiWt0FLpHDjJHar/9sRElhzPHLWMoqIiULsIh0JwVVbCYrEgKSlM36ltyLzI4oOsG43ljmPo+xMV0KF0gGXsVgtkWHhPCgncIWvj294+Dg8OUFXpoijkVZK3/qmx0ZShYHBaUy1Q4UWj39F98waqqyqxHgjCYbPyWbalZY2jKLCRhSaLYk55iHzdEde7ujg35CjN1XU/pYzZRXKESSMpKYdCFRA1aSwsLjHouZoa0djUlFOkKyEiEOb07Kz4HPlSuAK6ROwiWk9OzzBwSUmJqD0qRt0TovzTwUE+f7OwaFyB7v7k1DSDyPYu6urreX2lvV303OnlNSn0rawYU6B7odfJ1JEnBFZXV5cDdrvdvF5c8om8LJKXThzEJhkFyh06O69hZm6O5YLBIFwuF6qqq+W/JZa9K+vEsAK6SfVANKR/VUfHVXTfus001TQNmxsboLeuwXy0MvQiD8xmM4N6h5/jwf17aGltRTwex+kzZ1BaWoqtra0sJsXV6KQcEFuGvSO5uEu0P9bEoryt4m8ukQfUkwKBALY2N7kv8R9Pxlwf0gK4PR78Ak4cQYObEn/YAAAAAElFTkSuQmCC" class="go-mobile-qdeck go-mobile-qdeck'+e+'" />'),c.push('<div class="exit-mobile-qdeck exit-mobile-qdeck'+e+'" onclick="'+qname+".exit_mobile ("+e+')" title="Full-screen view">'),c.push("</div>"),c.push('<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAoVJREFUSA2lVj2PEkEY3plZV5I9Q3KBqzFHQkFJaCx0sTCxo6EnsfMPWPjBctqoueqMNf/CwtODxo7ySCxMaAjhgiRGiXjsh8+zzl5WKoZ7k+GdnZ33ed6PeWdRtVrtxnQ6jWxbvrUs8SCO449cq1Qqst1uWxBVr9fFaDSKW62WouaikTiO0xVCxBy2bXdpXC6Xb5ZKpZzv+xKkIp/PH3JuBMzN9FyD/4Fea5IjvmMk1FLKExAfc24sMH6tCQgeYgSa5BXB4MAz/ewbg6cG8M4niAZPotDPZ1ozdZ10v5GuVqsODTIkJGIkkQZn6q5qYwSOzbJYLEYsaBAEvlLqpQYQWq+h07leMlPS87wI4IIFhX4B8zMNGkAnRTaD/H+37Pf7PO+Xw+FwzYLidQPjUm9jBCSiRP+U4S+bJ44twaOoc570w+YcNUIjmkuSXzbRcrl8DPOfGOzUbEPR8z0QfFitVp8xNxNGsG2Hpo1nxmC4e1sSOo0DZO90BHO53H2cuIfw7RfGZjqJeWt/331/cfHjG+bmwoJvHoLss1LyHS9Ipl+ZwyeX3x0AeLD9re15EEIM9KrqhGH4BIQSV7vMhqf3bqVSOxu702bkldNH6o5Yp16v57CJd42ggQjuAZCec5CIchvpsyeTyWmhUFCLxcK6LgHTklyW0OwfAeK74JDz+fzUdd2UGK8MBACdTFGvrnSs8apPvyddQl4nAg8FfR5F0SOmhZ4DL4kCOsRzA9fPHkmMBXjHOIonNEwbD2tdHRWjSL4hIHhjDM4OPTjIH8JDwTn/GPB7QiCQpF9GfqB8ru2SInV+/vX7YDCwx+OxaDabAU8LCzqbzT7BaxcRfEEvPGV0fwEIA/zW345reQAAAABJRU5ErkJggg==" class="exit-mobile-qdeck exit-mobile-qdeck'+e+'" />'),(deckdata[e].n_cards>1||deckdata[e].use_dataset||deckdata[e].use_dataset_card_html)&&!q.preview){var _;n="";deckdata[e].hide_forward_back_b&&(n=' style="visibility: hidden;"'),_=deckdata[e].use_dataset&&deckdata[e].dataset_intro_f?"Go to &ldquo;Choose cards&rdquo;":"Go to first card",c.push('<span class="bbfe bbfe-qdeck'+e+" bck-card-qdeck"+e+'"'+n+' onclick="'+qname+".bck_card ("+e+', true )" title="'+_+'">'),c.push('<span class="bar-up">|</span>&#x25c0;&#xFE0E;'),c.push("</span>"),c.push('<span class="bbfe bbfe-qdeck'+e+" bck-card-qdeck"+e+'"'+n+' onclick="'+qname+".bck_card ("+e+', false)" title="Go to previous card">'),c.push("&#x25c0;&#xFE0E;"),c.push("</span>"),c.push('<span class="card-number-qdeck card-number-qdeck'+e+'"'+n+">"),c.push("</span>"),c.push('<span class="bbfe bbfe-qdeck'+e+" fwd-card-qdeck"+e+'"'+n+' onclick="'+qname+".fwd_card ("+e+', false)" title="Go to next card">'),c.push("&#x25b6;&#xFE0E;"),c.push("</span>"),c.push('<span class="bbfe bbfe-qdeck'+e+" fwd-card-qdeck"+e+'"'+n+' onclick="'+qname+".fwd_card ("+e+', true )" title="Go to most-recent card">'),c.push('&#x25b6;&#xFE0E;<span class="bar-up">|</span>'),c.push("</span>")}if(deckdata[e].qrecord_id){c.push("&nbsp;"),c.push('<span class="response_recorded_wrapper response_recorded_wrapper-qdeck'+e+'">'),c.push('<span class="response_recorded response_recorded-qdeck'+e+'">'),c.push("&#x2714;&#xFE0E;"),c.push("</span>"),c.push('<span class="response_recorded response_recorded_shadow response_recorded_shadow-qdeck'+e+'">'),c.push("&#x2714;&#xFE0E;"),c.push("</span>"),c.push("</span>");var s=qqc.get_qwiz_param("url","./");c.push('<div class="qwiz_icon_and_menu_container lock_unlock qdeck'+e+'">'),c.push('<div id="locked-deck'+e+'" class="qwiz-locked qwiz_menu_icon">'),c.push('<img src="'+s+'/images/icon_locked.png" />'),c.push("</div>"),c.push('<div id="unlocked-deck'+e+'" class="qwiz-unlocked qwiz_menu_icon">'),c.push('<img src="'+s+'/images/icon_unlocked.png" />'),c.push("</div>"),c.push('<div class="qwiz_icon_trigger_and_menu qwiz-hover">'),c.push('<div class="qwiz_icon_trigger">'),c.push("</div>"),c.push('<div id="pay_unlock_menu-qdeck'+e+'" class="qdeck-pay_unlock_menu qwiz_menu">'),c.push("</div>"),c.push("</div>"),c.push("</div>");var o="";(q.no_intro_b[e]||1==deckdata[e].n_cards)&&(o=" qwiz-usermenu_icon_no_intro"),c.push('<div class="qwiz_icon_and_menu_container qdeck'+e+'">'),c.push('<div class="qwiz-usermenu_icon qwiz_menu_icon'+o+'">'),c.push("&#x25bc;"),c.push("</div>"),c.push('<div class="qwiz_icon_trigger_and_menu qwiz-hover">'),c.push('<div class="qwiz_icon_trigger" style="left: -12px; top: -4px;">'),c.push("</div>"),c.push('<div id="usermenu-qdeck'+e+'" class="qdeck-usermenu qwiz_menu">'),c.push("</div>"),c.push("</div>"),c.push("</div>")}if(n="",deckdata[e].hide_progress_b&&(n=' style="display: none;"'),c.push('<span class="progress_text"'+n+">"),c.push("</span>"),c.push("</div>"),c.push('<div id="qcard_header-qdeck'+e+'" class="qcard_header qcard_editable">'),c.push("</div>"),q.preview){q.no_intro_b[e]||(c=c.concat(card_container_divs(e,d,-1)));for(var l=deckdata[e].n_cards,h=0;h<l;h++)c=c.concat(card_container_divs(e,d,h));l>1&&(c=c.concat(card_container_divs(e,d,l)))}else c=c.concat(card_container_divs(e,d));return q.preview||(c.push('<div id="qcard_next_buttons-qdeck'+e+'" class="qcard_next_buttons">'),c.push("</div>")),c.push('   <div class="qdeck-focusable">'),c.push('      <input type="text" />'),c.push("   </div>"),c.push("</div>"),c.join("\n")}function card_container_divs(e,t,a){debug[0]&&console.log("[card_container_divs] i_card:",a);var d,r=[],c="",n="";void 0!==a&&(c=" preview-qdeck"+e+" preview-qcard"+a,n=", "+a),d=-1==t.indexOf("border")?" qcard-border-important":" qcard-border";var i="";!q.qwizard_b&&deckdata[e].click_flip_b&&(i=' onclick="'+qname+".qdeck_flip ("+e+n+')"');var _="";chromebook_b&&(_=' style="backface-visibility: visible;"');var s=q.qwizard_b?" qwizard_line_height":"";return r.push('<div class="card-container'+c+'"> '),r.push('<div class="qcard_card-qdeck'+e+' qcard_card"'+_+">"),r.push('<div class="qcard-front qcard-front-back'+d+'" '+t+i+">"),r.push('<div class="qcard_content'+s+'">'),r.push('<div class="qcard_content_size">'),q.qwizard_b&&(r.push('<div id="qcard_front-part0-qdeck'+e+'" class="qcard-part0" style="display: none;">'),r.push("</div>"),r.push('<div id="qcard_front-part1-qdeck'+e+'" class="qcard_front-parts qcard-part1 qcard-inline qcard_editable" data-i_part="1">'),r.push("</div>"),r.push('<div id="qcard_front-input1-qdeck'+e+'" class="qcard_front-inputs qcard-inline">'),r.push("</div>"),r.push('<div id="qcard_front-part2-qdeck'+e+'" class="qcard_front-parts qcard-part2 qcard-inline qcard_editable" data-i_part="2">'),r.push("</div>"),r.push("</div>"),r.push('<div class="qcard_content_size_alt">')),r.push("</div>"),r.push("</div>"),r.push("</div>"),r.push('<div class="qcard-back qcard-front-back'+d+'" '+t+i+">"),r.push('<div class="qcard_content'+s+'">'),r.push('<div class="qcard_content_size">'),q.qwizard_b&&(r.push('<div id="qcard_back-echo-qdeck'+e+'" class="qcard-inline">'),r.push("</div>"),r.push('<div id="qcard_back-part1-qdeck'+e+'" class="qcard-part1 qcard-inline qcard_editable">'),r.push("</div>"),r.push("</div>"),r.push('<div class="qcard_content_size_alt">')),r.push("</div>"),r.push("</div>"),r.push("</div>"),r.push("</div>"),r.push("</div>"),q.preview&&a>=0&&a<deckdata[e].n_cards&&r.push('<button class="qwiz_button qcard_flip flip-qdeck'+e+"-qcard"+a+'" onclick="'+qname+".qdeck_flip ("+e+", "+a+')" title="'+T("Show the other side")+'">'+T("Flip")+"</button>"),debug[0]&&console.log("[card_container_divs] divs:",r),r}function check_qdeck_tag_pairs(e){var t="",a=e.match(/\[qdeck|\[\/qdeck\]/gm);if(a){var d=a.length,r=!1;if(d%2!=0)r=!0;else for(var c=0;c<d;c++)if(c%2==0){if("[qdeck"!=a[c]){r=!0;break}}else if("[/qdeck]"!=a[c]){r=!0;break}if(r)if(-1!=e.indexOf("more-link")||-1!=e.indexOf("search-entry-readmore")){var n=e.search(/\[qdeck/),i=e.search(/<[pa] class="more-link/);t=-1!=i?e.substring(0,n)+e.substr(i):e}else errmsgs.push(T("Unmatched [qdeck] - [/qdeck] pairs."))}return t}function card_front_textentry_html(e,t){var a='<div class="qcard_textentry"><input id="qdeck-textentry" type="text" class="textentry-qdeck'+t+' qcard_textentry" /></div>\x3c!-- END --\x3e';return e=e.replace(/\[textentry[^\]]*\]/,a),debug[0]&&console.log("[card_front_textentry_html] htm: ",e),e}function card_back_textentry_html(e,t){var a="";return q.preview&&(a=" preview-qcard"+deckdata[t].i_card),e=(e=-1!=e.indexOf('class="back_textentry"')?e.replace("back_textentry","back_textentry-qdeck"+t+a):e.replace("textentry",'<span class="back_textentry-qdeck'+t+a+' back_qdeck_textentry"></span>')).replace(/\[([^[]*textentry.*?)\]/,'<p class="back_textentry_p-qdeck'+t+a+' back_textentry_p">$1</p>'),debug[0]&&console.log("[card_back_textentry_html] htm:",e),e}function init_element_pointers(e){deckdata[e].$qcard_window=$("div#qcard_window-qdeck"+e),deckdata[e].$qcard_container=$("div#qcard_window-qdeck"+e+" div.card-container"),deckdata[e].$progress=$("div#qcard_progress-qdeck"+e),deckdata[e].$progress_text=$("div#qcard_progress-qdeck"+e+" span.progress_text"),deckdata[e].$header=$("div#qcard_header-qdeck"+e),deckdata[e].$qcard_card=$("div.qcard_card-qdeck"+e),deckdata[e].$qcard_card_front_back=$("div.qcard_card-qdeck"+e+" div.qcard-front-back"),deckdata[e].$qcard_card_front=$("div.qcard_card-qdeck"+e+" div.qcard-front div.qcard_content_size"),deckdata[e].$qcard_card_front_alt=$("div.qcard_card-qdeck"+e+" div.qcard-front div.qcard_content_size_alt"),deckdata[e].$qcard_card_back=$("div.qcard_card-qdeck"+e+" div.qcard-back  div.qcard_content_size"),deckdata[e].$qcard_card_back_alt=$("div.qcard_card-qdeck"+e+" div.qcard-back  div.qcard_content_size_alt"),deckdata[e].$next_buttons=$("div#qcard_next_buttons-qdeck"+e),q.qwizard_b&&(deckdata[e].$qcard_front_part1=$("#qcard_front-part1-qdeck"+e),deckdata[e].$qcard_back_part1=$("#qcard_back-part1-qdeck"+e)),debug[5]&&console.log("[init_element_pointers] $next_buttons:",deckdata[e].$next_buttons)}function get_login_html(e,t,a,d){t=t?1:0,d=d?1:0;var r="onfocus=\"jQuery ('#qdeck_login-qdeck"+e+" p.login_error').css ('display', 'none')\"",c='<div id="qdeck_login-qdeck'+e+'" class="qdeck-login">\n<p>';c+=a?"<strong>"+a+"</strong>":t?"<strong>"+T("Add team member")+"</strong>":"<strong>"+T("Record score/credit?")+"</strong>",c+="</p>",c+='<form action="nada" onSubmit="return qcard_.login ('+e+", "+t+", "+d+')">\n<table><tr><td><label for="qdeck_username-qdeck'+e+'">'+T("Login name")+'</label></td><td><input type="text" id="qdeck_username-qdeck'+e+'" '+r+' /></td></tr><tr><td><label for="qdeck_password-qdeck'+e+'">'+T("Password")+'</label></td><td><input type="password" id="qdeck_password-qdeck'+e+'" /></td></tr><tr><td style="text-align: right;"><span class="qdeck-remember" title="'+T("Save preference (do not use on shared computer)")+'"><label><span><input type="checkbox" /></span>&nbsp;'+T("Remember")+'</label></span></td><td><button type="submit" class="qwiz_button">'+T("Student login")+"</button>&ensp;",t||(c+='<span class="qwiz_button" onclick="qwiz_qcards_common.create_register_taker_screen (\''+qname+"', "+e+", "+d+')">'+T("New student - register")+"</span>&ensp;"),c+='<span class="qwiz_button" onclick="'+qname+".no_login ("+e+","+t+')">',c+=T(t?"Cancel":"No thanks"),c+="</span></td></tr>",t||(c+='<tr><td></td><td class="qdeck-smaller"><a href="'+qqc.get_qwiz_param("server_loc","//qwizcards.com/admin")+'/password_reset_request" target="_blank">'+T("Forgot password?")+"</a></td></tr>");var n="new_account";return-1!=window.location.href.indexOf("sciencemusicvideos.com")&&(n="new_account_smv"),c+='<tr><td colspan="2"><hr style="margin: 5px;"></td></tr><tr><td colspan="2" class="qdeck-center"><b>Teachers: track your students&rsquo; progress on quizzes and flashcards.&nbsp; <a href="'+qqc.get_qwiz_param("secure_server_loc","https://qwizcards.com/admin")+"/"+n+'" target="_blank">Create&nbsp;teacher&nbsp;administrative&nbsp;account</a></b></td></tr></table>\n</form><p class="login_error">'+T("Login incorrect. Please try again")+"</p>\n</div>\n"}function alert_not_logged_in(e){q.no_intro_b[e]&&deckdata[e].qrecord_id&&$.cookie("qwiz_user_login")&&("undefined"!=typeof document_qwiz_user_logged_in_b&&document_qwiz_user_logged_in_b&&"undefined"!=typeof document_qwiz_username||document_qwiz_declined_login_b||document_qwiz_not_logged_in_alerted||q.qwizard_b||(alert("Note: you are not logged in. You must be logged in to receive credit."),document_qwiz_not_logged_in_alerted=!0))}function showing_front(e){var t=!0;if(q.preview)if(deckdata[e].showing_front_bs){var a=deckdata[e].i_card;void 0!==deckdata[e].showing_front_bs[a]&&(t=deckdata[e].showing_front_bs[a])}else deckdata[e].showing_front_bs=[];else t=deckdata[e].showing_front_b;return t}function toggle_showing_front(e){if(q.preview){var t=deckdata[e].i_card;deckdata[e].showing_front_bs?void 0!==deckdata[e].showing_front_bs[t]?deckdata[e].showing_front_bs[t]=!deckdata[e].showing_front_bs[t]:deckdata[e].showing_front_bs[t]=!1:(deckdata[e].showing_front_bs=[],deckdata[e].showing_front_bs[t]=!1)}else deckdata[e].showing_front_b=!deckdata[e].showing_front_b}function set_header(e,t,a){if(null!=a){var d=deckdata[e].header_html;d?deckdata[e].$header.html(d):deckdata[e].$header.hide()}var r=$("div.qcard_card-qdeck"+e+" div."+t).outerWidth();if(debug[0]&&console.log("[set_header] qcard_width: ",r),deckdata[e].card_width_setting){var c=deckdata[e].card_width_setting.replace("px","");r<c&&(r=c)}return"center"!=deckdata[e].align&&"right"!=deckdata[e].align||document_qwiz_mobile||deckdata[e].$qcard_window.width(r),r}function delay_mp3_player_reset(){$("span.wrap_inline_mp3j, span.play-mjp").off("click"),MP3_JPLAYER.vars.play_f&&(mp3_jplayer_warning_f||(mp3_jplayer_warning_f=!0,alert('In order for MP3jPlayer to work with flashcards, the "Encode URLs" setting must be turned off.\nPlease go to WordPress Dashboard > MP3jPlayer > Settings > Advanced.\nUnder "Misc File Settings" unclick the checkbox and then click "Save All Changes"')));setTimeout(function(){debug[0]&&console.log("[delay_mp3_player_reset > MP3_JPLAYER.init ()]"),MP3_JPLAYER.init()},1500)}function hangman_focus(e,t){var a=q.get_card_front(e).find("span.qdeck_hangman.qdeck_hangman_c"+t+" input");debug[0]&&console.log("[hangman_focus] $hangman_input[0]:",a[0]),suppress_hangman_hint_b=!0,a.focus()}function add_editable_parts(e,t){var a=$("div.qcard-front-inputs").length;debug[0]&&console.log("[add_editable_parts] n_existing:",a,", n_textentry_hangman:",t);for(var d=a+1;d<=t;d++){var r='<div id="qcard_front-input'+d+"-qdeck"+e+'" class="qcard_front-inputs qcard-inline"></div>',c=d+1,n='<div id="qcard_front-part'+c+"-qdeck"+e+'" class="qcard_front-parts qcard-part'+c+' qcard-inline qcard_editable" data-i_part="'+c+'"></div>';$("div.qcard-front div.qcard_content_size").append(r+n),qwizard.init_tinymce("div#qcard_front-part"+c+"-qdeck"+e)}q.n_textentry_hangman=t}function delete_unmatched_p(e){var t=e.indexOf("<p");return-1!=t&&-1==e.substr(t).indexOf("</p")&&(e=e.replace(/<p[^>]*>/,"")),-1==e.replace(/<[^>]+>/gm,"").search(/\S/)&&(e+=" &emsp;"),e}function set_editable_parts_back(e,t,a,d){setTimeout(function(){debug[0]&&console.log("[set_editable_parts_back > delay_set] i_choice:",a),t=qqc.shortcodes_to_video_elements(t);var r=deckdata[e].$qcard_back_part1;if(void 0!==a){var c=t.indexOf('<div id="qcard_back-part1'),n=t.substr(0,c),i=t.substr(c).replace(/<div[^>]*>/,"").replace(/<\/div>$/,"");if($("#qcard_back-echo-qdeck"+e).html(n).show(),r.html(i).show(),d){var _="#qcard_back-part1-qdeck"+e;qwizard.init_remove_placeholder(_),qqc.select_placeholder($(_))}r.data("choice",a)}else if(-1!=t.indexOf("back_textentry_p")){var s=t.match(/([^]*?<p class="back_textentry_p[^]*?<\/p>)([^]*)/);$("#qcard_back-echo-qdeck"+e).html(s[1]).show(),r.html(s[2]).show(),r.removeData("choice")}else $("#qcard_back-echo-qdeck"+e).html("").hide(),r.html(t).show(),r.removeData("choice")},100)}function mobile_center_vertical(e){$qcard_card_front=q.get_card_front(e),$qcard_card_back=get_card_back(e),center_vertical($qcard_card_front),center_vertical($qcard_card_back)}function center_vertical(e,t){(document_qwiz_mobile?e.outerHeight()<e.parents("div.card-container").height():e.outerHeight()<t)?e.parent().css({top:"50%",transform:"translateY(-50%)","-webkit-transform":"translateY(-50%)"}):e.parent().css({top:"",transform:"","-webkit-transform":""})}function shuffle(e){for(var t,a,d=e.length;0!==d;)a=Math.floor(Math.random()*d),t=e[d-=1],e[d]=e[a],e[a]=t;return e}$(document).ready(function(){qqc=qwiz_qcards_common;var e=window.location.search.match(/preview_qcard_=(\d+)/);e&&(q.preview_i_deck_plus1=parseInt(e[1],10)+1);var t=document.location.href;qwizcards_page_f=-1!=t.indexOf("qwizcards.com/u/")||-1!=t.indexOf("qwizcards.com/admin/")||-1!=t.indexOf("localhost/u/")||-1!=t.indexOf("localhost/admin/")||-1!=t.indexOf("192.168.1.120/u/")||-1!=t.indexOf("192.168.1.120/admin/"),"undefined"==typeof document_qwizard_user_page&&-1==window.location.href.indexOf("action=edit")&&-1==window.location.href.indexOf("post-new")&&q.qdeck_init()}),this.qdeck_init=function(e,t){content=qqc.get_qwiz_param("content","body"),default_use_dict=qqc.get_qwiz_param("use_dict","true"),default_use_terms=qqc.get_qwiz_param("use_terms","true"),default_hangman_max_hints=parseInt(qqc.get_qwiz_param("hangman_hints",2)),hint_timeout_sec=qqc.get_qwiz_param("hint_timeout_sec",20),post_id=qqc.get_qwiz_param("post_id",0),document_qwiz_mobile_enabled="Enabled"==qqc.get_qwiz_param("mobile_enabled","Enabled"),Tcheck_answer_message=T('Need help?  Try the "hint" button'),q.n_textentry_hangman=1,t||(qqc.set_force_mobile(),process_html(),errmsgs.length&&!e&&(q.qwizard_b||(qqc.get_qwiz_param("regular_page_error_check")?alert(Tplural("Error found","Errors found",errmsgs.length)+":\n\n"+errmsgs.join("\n")):console.log("Errors found:\n",errmsgs.join("\n")))),n_decks&&(q.$dialog_no_credit||($("body").append(dialog_no_credit_html()),q.$usernames_is_are=$("#qwizcards_usernames_is_are"),q.$dialog_no_credit=$("#qwizcards_dialog_no_credit").dialog({height:300,width:550,modal:!0,autoOpen:!1,buttons:{Close:function(){q.$dialog_no_credit.dialog("close")}}})),qqc.is_mobile()&&!document_qwiz_force_mobile_f&&$(".go-mobile-qdeck").show(),q.qdeck_init2(n_decks)))},this.qdeck_init2=function(e,t,a){for(var d=0;d<e;d++){init_element_pointers(d),q.init_card_order(d),deckdata[d].i_card=-1,deckdata[d].i_user_card=-1,deckdata[d].ii_card=0,deckdata[d].qrecord_id&&(deckdata[d].record_start_b=!0),set_header(d,"qcard-front",!0);var r=deckdata[d].$header.outerHeight(),c=60+r+"px";deckdata[d].header_height=r,deckdata[d].$qcard_window.css({"margin-bottom":c});var n=deckdata[d].use_dataset_card_html;if(n&&!a){var i=get_attr(n=qqc.replace_smart_quotes(n),"use_dataset_card"),_=i.indexOf("|"),s=i.substr(0,_);qqc.get_dataset_questions(s,qname,d,deckdata[d].qrecord_id,[],[],1e4,deckdata[d].dataset_questions_to_do,deckdata[d].random_b,n)}else if(t||deckdata[d].use_dataset||!q.no_intro_b[d]&&1!=deckdata[d].n_cards){if(deckdata[d].no_flip_b=deckdata[d].click_flip_b,q.qwizard_b)t||q.set_editable_parts_front(d,-1,deckdata[d].intro_html);else{var o=q.get_card_front(d,-1);o.html(qqc.decode_image_tags(deckdata[d].intro_html)),deckdata[d].first_display_f=!1;var l=deckdata[d].card_height_setting;center_vertical(o,l=l?l.replace("px",""):deckdata[d].$qcard_container.outerHeight())}if(!q.preview){if(!deckdata[d].hide_qwizcards_icon_b){var h=create_qwiz_icon_div(d);deckdata[d].$qcard_card.append(h)}q.qwiz_icon_stop_propagation(d)}if(q.set_container_width_height(d),deckdata[d].scroll_b||document_qwiz_mobile)deckdata[d].$qcard_card.find("div.qcard-front, div.qcard-back").css({overflow:"auto"})}else q.start_deck2(d);q.qwizard_b&&(debug[0]&&console.log("[qdeck_init2] $ ('div#qcard_front-part1-qdeck' + i_deck):",$("div#qcard_front-part1-qdeck"+d)),qwizard.init_tinymce("div#qcard_header-qdeck"+d),qwizard.init_tinymce("div#qcard_front-part1-qdeck"+d),qwizard.init_tinymce("div#qcard_front-part2-qdeck"+d),qwizard.init_tinymce("div#qcard_back-part1-qdeck"+d))}document_qwiz_force_mobile_f&&q.go_mobile(0),q.preview&&!q.qwizard_b&&init_preview(0),$("div.qcard_card").flip({front:"div.qcard-front",back:"div.qcard-back",autoSize:!1,speed:700,trigger:"manual"})},this.process_reg_code=function(e){if(debug[0]&&console.log("[process_reg_code] reg_code:",e),""!=e){var t={reg_code:e};qqc.jjax(qname,0,0,"reg_code_add_to_class",t)}},this.hide_reg_code_error=function(){$("div.qcard_reg_code_errmsg").html("").hide()},this.set_i_deck_i_card=function(){debug[0]&&console.log("[set_i_deck_i_card] this:",this);var e=this.className,t=e.match("preview-qdeck([0-9]+)")[1],a=e.match("preview-qcard([-0-9]+)")[1];deckdata[t].i_card=a},this.get_card_front=function(e,t,a){void 0===t&&(t=deckdata[e].i_user_card);var d=q.qwizard_b&&deckdata[e].use_dataset_card_ids[t];return a&&(d=!d),q.preview?$(d?"div#qcard_window-qdeck"+e+" div.card-container.preview-qcard"+t+" div.qcard-front div.qcard_content_size_alt":"div#qcard_window-qdeck"+e+" div.card-container.preview-qcard"+t+" div.qcard-front div.qcard_content_size"):d?deckdata[e].$qcard_card_front_alt:deckdata[e].$qcard_card_front},this.process_html2=function(e,t,a,d){var r=new RegExp("\\[qdeckdemo\\][\\s\\S]*?\\[\\/qdeckdemo\\]","gm");q.qdeckdemos=e.match(r),q.qdeckdemos&&(e=e.replace(r,"<qdeckdemo></qdeckdemo>"),debug[0]&&console.log("[process_html2] q.qdeckdemos.length: ",q.qdeckdemos.length));var c=0,n=check_qdeck_tag_pairs(e=(e=e.replace(/<!--[^]*?-->/gm,"")).replace(/\[!+\][^]*?\[\/!+\]/gm,""));if(n)e=n;else{var i=e.match(/\[qdeck[^]*?\[\/qdeck\]/gm);if(i){c=i.length;debug[0]&&(console.log("[process_html2] local_n_decks: ",c),console.log("                qdeck_matches[0]: ",i[0])),q.decks_cards=[];for(var _=0;_<c;_++){var s=q.process_qdeck_pair(i[_],t,a,d,d);d&&(qwizard.questions_cards&&qwizard.questions_cards.length&&(qwizard.questions_cards[0].dataset_b=qwizard.questions_cards_dataset_b,q.decks_cards[t]=JSON.parse(JSON.stringify(qwizard.questions_cards))),debug[0]&&(console.log("[process_html2] i_deck:",t,", qwizard.questions_cards:",qwizard.questions_cards),qwizard.questions_cards&&(console.log("[process_html2] JSON.stringify (qwizard.questions_cards):",JSON.stringify(qwizard.questions_cards)),console.log("[process_html2] qwizard.questions_cards.length:",qwizard.questions_cards.length)))),e=e.replace(/(<[ph][^>]*>\s*)*?\[qdeck[^]*?\[\/qdeck\]/m,s),t++}if(debug[0]&&q.decks_cards.length)for(var o=q.decks_cards.length,l=0;l<o;l++)console.log("[process_html2] q.decks_cards["+l+"]:",q.decks_cards[l]);debug[3]&&console.log("[process_html2] htm:",e)}}return{htm:e,i_deck:t}},this.init_textentry_autocomplete=function(e,t){debug[0]&&console.log("[init_textentry_autocomplete] i_card:",t);var a=deckdata[e].cards[t],d=a.textentry_minlength;a.all_choices[0].length<d&&(d=a.all_choices[0].length);var r=q.get_card_front(e);if(a.single_char_b)r.find("input.qcard_single_char_entry").keyup(single_char_textentry_keyup);else{var c=r.find("input.textentry-qdeck"+e);c.autocomplete({minLength:d,source:find_matching_terms,close:menu_closed,open:menu_shown,select:q.item_selected}),c.keyup(menu_closed)}if(a.single_char_b)$(button_flip_selector(e)).addClass("qwiz_button_disabled").attr("disabled",!0),deckdata[e].check_answer_disabled_b=!0,a.check_answer="Check answer";else{if(deckdata[e].terms)deckdata[e].textentry_terms_metaphones||(deckdata[e].textentry_terms_metaphones=qqc.process_textentry_terms(deckdata[e].terms));else if(!default_textentry_terms_metaphones){var n=qqc.get_qwiz_param("url","./"),i="";"body"==content&&"./"==n?"undefined"!=typeof document_qwiz_terms&&(i=document_qwiz_terms):i=qqc.get_textentry_terms(n+"terms.txt",deckdata),default_textentry_terms_metaphones=qqc.process_textentry_terms(i)}var _;if(deckdata[e].add_terms&&(deckdata[e].add_textentry_terms_metaphones||(deckdata[e].add_textentry_terms_metaphones=qqc.process_textentry_terms(deckdata[e].add_terms))),a.use_terms_b)_=a.textentry_plural_b?"plural":"singular",deckdata[e].terms?current_card_textentry_terms_metaphones[e]=deckdata[e].textentry_terms_metaphones[_]:current_card_textentry_terms_metaphones[e]=default_textentry_terms_metaphones[_],deckdata[e].add_terms&&(current_card_textentry_terms_metaphones[e]=current_card_textentry_terms_metaphones[e].concat(deckdata[e].add_textentry_terms_metaphones[_]));else current_card_textentry_terms_metaphones[e]=[];textentry_answers[e]=a.all_choices,textentry_answer_metaphones[e]=textentry_answers[e].map(function(e){return e=e.replace(/\s*(\S+)\s.*/,"$1"),qqc.metaphone(e)});var s,o,l=textentry_answers[e].map(function(e){return[e,qqc.metaphone(e)]});if(debug[6]&&console.log("[init_textentry_autocomplete] textentry_answers_metaphones: ",l),current_card_textentry_terms_metaphones[e]=current_card_textentry_terms_metaphones[e].concat(l),current_card_textentry_terms_metaphones[e]=qqc.sort_dedupe_terms_metaphones(current_card_textentry_terms_metaphones[e]),debug[6]){console.log("[init_textentry_autocomplete] current_card_textentry_terms_metaphones[i_deck].length: ",current_card_textentry_terms_metaphones[e].length),console.log("[init_textentry_autocomplete] current_card_textentry_terms_metaphones[i_deck].slice (0, 10): ",current_card_textentry_terms_metaphones[e].slice(0,10));var h=current_card_textentry_terms_metaphones[e].length-10;h>0&&console.log("[init_textentry_autocomplete] current_card_textentry_terms_metaphones[i_deck].slice ("+h+"): ",current_card_textentry_terms_metaphones[e].slice(h))}if(!deckdata[e].bck_f)if(t==deckdata[e].i_card&&!deckdata[e].card_reviewed_b)if(!a.saved_textentry_ok)d<=1?(s=T("Type a letter/number"),o=T("Type a letter")):(d=Math.max(d,3),s=(s=T("Type %s+ letters/numbers")).replace("%s",d),o=(o=T("Type %s+ letters")).replace("%s",d)),c.attr("placeholder",s),$(button_flip_selector(e)).html(o),a.save_check_answer=o,a.check_answer=o,a.textentry_minlength=d,$(button_flip_selector(e)).addClass("qwiz_button_disabled").attr("title",Tcheck_answer_message),deckdata[e].check_answer_disabled_b=!0;deckdata[e].textentry_n_hints=0,0!=deckdata[e].n_reviewed||!q.no_intro_b[e]&&1!=deckdata[e].n_cards?q.start_hint_timeout(e):deckdata[e].$qcard_window.attr("onmouseenter",qname+".start_hint_timeout ("+e+")")}deckdata[e].click_flip_b&&$("#textentry_hint-qdeck"+e).click(function(e){e.stopPropagation(),debug[0]&&console.log("[init_textentry_autocomplete] click event:",e)})},this.start_hint_timeout=function(e){debug[0]&&console.log("[start_hint_timeout] i_deck:",e),deckdata[e].$qcard_window.removeAttr("onmouseenter");$("#textentry_hint-qdeck"+e).html("Hint").hide(),hint_timeout_sec>=0&&(show_hint_timeout[e]=setTimeout(function(){$("#textentry_hint-qdeck"+e).removeAttr("disabled").removeClass("qwiz_button_disabled").show()},1e3*hint_timeout_sec))},this.process_qdeck_pair=function(e,t,a,d,r){debug[0]&&(console.log("[process_qdeck_pair] htm:",e),console.log("[process_qdeck_pair] i_deck:",t)),q.qwizard_b=a,"undefined"!=typeof qwizard&&(qw=qwizard),d&&(n_decks=1,set_qwizard_data_b=!0,q.no_intro_b=[]),deckdata.push({}),deckdata[t].cards=[],deckdata[t].first_display_f=!0,deckdata[t].answered_correctly={},deckdata[t].showing_front_b=!0,deckdata[t].i_card=0,deckdata[t].n_reviewed=0,deckdata[t].n_got_it=0,deckdata[t].exit_html="",deckdata[t].align="",deckdata[t].hangman={},deckdata[t].use_dataset="",deckdata[t].dataset_id={},deckdata[t].use_dataset_card_ids={},deckdata[t].qrecord_id="",deckdata[t].qrecord_id_ok="check credit",deckdata[t].unit=[],deckdata[t].default_card_back_background="",deckdata[t].card_back_background=[],deckdata[t].click_flip_b=!0;var c=(y=e.match(/(<[^\/][^>]*>\s*)*?\[qdeck([^\]]*)\]/m))[0],n=y[2];c=qqc.replace_smart_quotes(c),n=qqc.replace_smart_quotes(n),debug[0]&&(console.log("[process_qdeck_pair] qdeck_tag: ",c),console.log("[process_qdeck_pair] attributes: ",n)),set_qwizard_data_b&&qw.set_qwizard_data("qwiz_deck_attributes",n);var i=!1;deckdata[t].summary_b="false"!=get_attr(c,"summary");var _=get_attr(c,"use_dataset");if(_){deckdata[t].use_dataset=_;var s=get_attr(c,"dataset_intro");s&&"true"!=s?"false"==s&&(s=!1):s=!0,deckdata[t].dataset_intro_f=s;var o="false"!=get_attr(c,"spaced_repetition");if(deckdata[t].dataset_questions_to_do=o?"spaced_repetition":"all",deckdata[t].random_b="true"==get_attr(c,"random"),y=c.match(/\sstyle\s*=\s*"[^"]+"/gm))for(var l=y.length,h=0;h<l;h++){var k=encodeURIComponent(y[h]);c=c.replace(y[h],k)}var u=get_attr(c,"display_name");if(u){deckdata[t].use_dataset_options_display_name=decodeURIComponent(u);c=c.replace(/\sdisplay_name\s*=\s*"[^"]*?"/,"")}c=decodeURIComponent(c)}var p=get_attr(n,"align");"center"!=p&&"right"!=p&&"tiled"!=p||(deckdata[t].align=p,"tiled"==p&&(deckdata[t].spacing=20));var m=parseInt(get_attr(n,"spacing"));qqc.isInteger(m)&&(deckdata[t].spacing=m);var g=get_attr(n,"qrecord_id");g&&(deckdata[t].qrecord_id=g,deckdata[t].q_and_a_text={},q.qrecord_b||(q.qrecord_b=!0,"undefined"!=typeof document_qwiz_user_logged_in_b&&"not ready"!=document_qwiz_user_logged_in_b||qqc.check_session_id(t))),(q.qwizard_b||set_qwizard_data_b)&&get_attr(n,"dataset")&&(q.dataset_b=!0,set_qwizard_data_b&&(qw.questions_cards_dataset_b=!0));var b=get_attr(n,"unit");if(b?(deckdata[t].default_unit=b,set_qwizard_data_b&&qw.set_qwizard_data("default_unit",b)):deckdata[t].default_unit="null",q.qwizard_b)deckdata[t].click_flip_b=!1;else{var f=get_attr(n,"click_flip");f&&(deckdata[t].click_flip_b=!("false"==f))}var v=get_attr(n,"card_back");v?deckdata[t].default_card_back_background=v:(v=get_attr(n,"card_back_image"),deckdata[t].default_card_back_background=v?"img:"+v:""),deckdata[t].scroll_b="true"==get_attr(n,"scroll"),deckdata[t].hide_forward_back_b="true"==get_attr(n,"hide_forward_back"),deckdata[t].hide_progress_b="true"==get_attr(n,"hide_progress"),deckdata[t].hide_qwizcards_icon_b="true"==get_attr(n,"hide_qwizcards_icon"),deckdata[t].hide_flip_b="true"==get_attr(n,"hide_flip"),deckdata[t].hide_gotit_b="true"==get_attr(n,"hide_gotit"),deckdata[t].hide_shuffle_b="true"==get_attr(n,"hide_shuffle");var w=get_attr(n,"flip_direction");w=""==w||"random"==w?"":"up_down"==w?"x":"y",deckdata[t].flip_axis=w;var y,x="",A=!1;(y=e.match(/\[qdeck[^\]]*\]((<\/[^>]+>\s*)*)/m,""))&&(x+=y[1]);l=(e=e.replace(/\[qdeck[^\]]*\]((<\/[^>]+>\s*)*)/m,"")).length;e=e.substring(0,l-8),e=qqc.trim(e);var z=qqc.check_pairs("[no_click_flip]","[/no_click_flip]",e);z&&("ok"==z?e=(e=e.replace(/\[no_click_flip\]/g,'<div class="qwiz_no_click_flip">')).replace(/\[\/no_click_flip\]/g,"</div>"):errmsgs.push(z+".  qdeck: "+(t+1)));var C=-1;_||-1!=e.search(/\[q([^\]]*)\]/m)||(errmsgs.push(T('Did not find question tags ("[q]")')+".  qdeck: "+(t+1)),C=0),e=qqc.process_inline_textentry_terms(e,"terms",deckdata,t),errmsgs=errmsgs.concat(deckdata.additional_errmsgs),e=qqc.process_inline_textentry_terms(e,"add_terms",deckdata,t),errmsgs=errmsgs.concat(deckdata.additional_errmsgs);var $=qqc.parse_html_block(e.substr(0,2e3),["^"],["[h]","[i]","[q]","[q "],"return whitespace");$&&(e=e.replace($,"")),e=process_header(e,t,!0),set_qwizard_data_b&&deckdata[t].header_html&&qw.set_qwizard_data("header_text",deckdata[t].header_html);var I=qqc.parse_html_block(e.substr(0,2e3),["[i]"],["[q]","[q ","[x]"],!0);if("NA"==I)""==(I=qqc.parse_html_block(e.substr(0,2e3),["^"],["[q]","[q ","[x]"],!0))&&(_?I="<br /><br /><br />":A=!0);else{var O=e.substr(0,200);O=qqc.trim(O);var D=qqc.opening_tag_shortcode_pos("[i]",O);O=O.substr(D,5);var P=I.replace(/<br[^>]*>/g,"");O!=(P=qqc.trim(P).substr(0,5))&&errmsgs.push(T("Text before intro")+' ("[i]").  qdeck: '+(t+1)),I=I.replace(/\[i\]/,"")}var E="";if(""!=I){E=I=qqc.balance_closing_tag(I);var j='<button id="start_button-qdeck'+t+'" class="qwiz_button" onclick="'+qname+".start_deck ("+t+')">'+T("Start reviewing cards")+"</button>";-1!=I.indexOf("[start]")?I=I.replace("[start]",j):(I+=j,E+="[start]")}set_qwizard_data_b&&qw.set_qwizard_data("intro_text",E),deckdata[t].intro_html=I;var Q=e;if(0!=C){D=qqc.opening_tag_shortcode_pos("([q |[q])",e);Q=e.substr(D)}var S='<button class="summary_exit_mobile_deck qwiz_button" onclick="'+qname+".exit_mobile ("+t+')">\nReturn to page view</button>\n',R=qqc.parse_html_block(e,["[x]"],[]);if("NA"!=R?(R=R.replace(/\[x\]/,""),R=qqc.balance_closing_tag(R)):R="",set_qwizard_data_b&&qw.set_qwizard_data("exit_text",R),R&&-1!=R.indexOf("[unpaid")&&-1!=R.indexOf("[/unpaid]")?R=(R=R.replace("[unpaid]",'<span class="unpaid_msg">')).replace("[/unpaid]","</span>"):deckdata[t].pay_quiz_deck_id&&(R+='<span class="unpaid_msg_payment_type unpaid_msg"></span>'),deckdata[t].use_dataset&&-1==R.indexOf("[restart")&&(R+="<br />[restart]"),R){var F;F=deckdata[t].use_dataset&&deckdata[t].dataset_intro_f?T("Practice more flashcards"):T("Review this flashcard stack again");var H=R.match(/\[restart[^\]]*\]/);if(H){var B=get_attr(qqc.replace_smart_quotes(H[0]),"label");B&&(F=B)}var W='    <button class="qwiz_button qwiz_restart"            onclick="'+qname+".start_deck ("+t+', true)">\n'+F+"\n    </button>\n";R=R.replace(H,W),R+="<br />"+S;var L=qqc.opening_tag_shortcode_pos("[x]",Q);Q=Q.substr(0,L)}else R=S;return deckdata[t].exit_html=R,_||-1!=e.search(/use_dataset_card\s*=\s*/)&&(i=!0,deckdata[t].use_dataset_card_html=Q),!C||_||i&&!r?(r&&(qwizard.questions_cards_dataset_b=!1),debug[0]&&console.log("[process_qdeck_pair] (not calling process_cards ()) qwizard_process_dataset_questions_f:",r)):C=q.process_cards(Q,t),q.no_intro_b.push(A),_||i||(deckdata[t].n_cards=C,deckdata[t].n_to_go=C,set_qwizard_data_b&&qw.set_qwizard_data("n_questions",C)),x=create_qdeck_divs(t,c),debug[3]&&console.log("                    new_html: ",x),void 0!==q.qwizard_b&&(qwizard.errmsgs=errmsgs),set_qwizard_data_b=!1,x},this.process_cards=function(e,t,a,d){debug[0]&&console.log("[process_cards] card_html:",e,", i_qwizard_card:",a),d&&(qw=qwizard,n_decks=1,set_qwizard_data_b=!0,q.qwizard_b=!0),number_first_card=void 0!==a?a:0,set_qwizard_data_b||-1!=e.indexOf("[!")&&(e=e.replace(/\[!+\][^]*?\[\/!+\]/gm,""));var r=e.match(/\[q[^\]]*\]/gm);debug[4]&&console.log("[process_cards] card_tags[0]: ",r[0]),r.length&&q.process_card_attributes(t,r,number_first_card);for(var c=[],n=["[q]","[q "],i=e;;){var _=qqc.parse_html_block(i,n,n);if("NA"==_)break;i=i.substr(_.length),_=(_=_.replace(/\[q[^\]]*\]/,"")).replace(/^\s*(<\/[^>]+>)+/,""),c.push(_)}debug[0]&&console.log("[process_cards] cards_html: ",c);var s=c.length;debug[0]&&console.log("[process_cards] n_cards: ",s);for(var o=0;o<s;o++){var l,h=o+number_first_card;l=-1!=c[o].search(/\[hangman|qdeck_hangman|hangman_img_wrapper/m)?process_hangman(t,h,c[o]):-1!=c[o].search(/\[c\]|\[c\*\]/m)?process_textentry(t,h,c[o]):process_card_input(t,h,c[o]),deckdata[t].cards[h]=l}return s},this.qwiz_icon_stop_propagation=function(e){$("#icon_qdeck"+e).click(function(e){e.stopPropagation()})},this.hangman_show=function(e,t){if(suppress_hangman_hint_b)return suppress_hangman_hint_b=!1,!1;var a=$(e);if(a.find("span.hangman_type_letters").hide(),clearTimeout(e.i_hint_timeout),t){e.i_hint_timeout=setTimeout(function(){a.find("button.hangman_hint, span.hangman_status").fadeOut(1e3)},2e3)}if(!e.done_f){a.find("button.hangman_hint").show();var d=a.find("span.hangman_status");d.html()&&d.show()}},this.hangman_hide=function(e){var t=$(e);e.i_hint_timeout=setTimeout(function(){t.find("button.hangman_hint, span.hangman_status").fadeOut(500)},100)},this.hangman_keyup=function(e,t,a,d,r,c){t.keyCode;var n=e.value;e.value=a,debug[9]&&console.log("[hangman_keyup] value.charCodeAt:",n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3));var i=n.replace(/[^a-z0-9]/gi,"");if(""==i)return!1;i=i.toLowerCase(),debug[9]&&console.log("[hangman_keyup] keychars:",i);for(var _,s=deckdata[d].hangman[r].hangman_current_entry[c],o=deckdata[d].hangman[r].hangman_final_entry[c],l=i.length,q=0;q<l;q++){if(_=update_hangman_input(i[q],s,o,d,r,c,e))break}if(!_&&deckdata[d].hangman[r].hangman_incorrect_chars[c]){var h=qqc.create_hangman_incorrect_chars_display(deckdata[d].hangman[r].hangman_incorrect_chars[c],3);$(e).siblings("span.hangman_status").html(h).show()}return!0},this.hangman_hint=function(e,t,a){if(deckdata[e].hangman[t].hangman_n_hints[a]++,deckdata[e].hangman[t].hangman_n_hints[a]>deckdata[e].hangman[t].hangman_max_hints)return!1;deckdata[e].hangman[t].hangman_n_hints[a]==deckdata[e].hangman[t].hangman_max_hints&&$("#hangman_hint-qdeck"+e+"-c"+a).attr("disabled",!0).addClass("qwiz_button_disabled");deckdata[e].hangman[t].hangman_answer[a];var d=deckdata[e].hangman[t].hangman_current_entry[a],r=d.match(/<u>.<\/u>/g),c=r.indexOf("<u>\t</u>");if(debug[9]&&(console.log("[hangman_hint] matches:",r),console.log("[hangman_hint] i_pos:",c)),-1!=c){var n=deckdata[e].hangman[t].hangman_final_entry[a],i=(r=n.match(/<u>.<\/u>/g))[c][3],_=q.get_card_front(e).find("span.qdeck_hangman.qdeck_hangman_c"+a+" input");update_hangman_input(i,d,n,e,t,a,_[0],!0),_.focus()}},this.textentry_hint=function(e){clearTimeout(show_hint_timeout[e]),show_hint_timeout[e]=0,deckdata[e].textentry_n_hints++;var t=deckdata[e].i_card,a=deckdata[e].cards[t].all_choices[0].substr(0,deckdata[e].textentry_n_hints),d=$("input.textentry-qdeck"+e);d.val(a).focus(),d.autocomplete("search"),$("#textentry_hint-qdeck"+e).attr("disabled",!0).addClass("qwiz_button_disabled").html("Another<br />hint");hint_timeout_sec>=0&&(show_hint_timeout[e]=setTimeout(function(){$("#textentry_hint-qdeck"+e).removeAttr("disabled").removeClass("qwiz_button_disabled")},1e3*hint_timeout_sec))},this.set_textentry_i_deck=function(e){var t=e.className;textentry_i_deck=t.match(/textentry-qdeck([0-9]+)/)[1],debug[6]&&console.log("[set_textentry_i_deck] textentry_i_deck: ",textentry_i_deck)},this.flip_if_back=function(e){return $("div.card-container").click(function(e){e.preventDefault(),console.log("[flip_if_back] > preventDefault")}),showing_front(e)||q.qdeck_flip(e),!1},this.process_card_attributes=function(e,t,a){var d=t.length;deckdata[e].card_topics||(deckdata[e].card_topics=new Array(d)),deckdata[e].topics||(deckdata[e].topics=[]);for(var r=!1,c=0;c<d;c++){var n=c+a;set_qwizard_data_b&&(qw.questions_cards[n]={});var i=t[c];deckdata[e].dataset_id[n]=n,deckdata[e].unit[n]=deckdata[e].default_unit;var _=i.match(/\[q +([^\]]*)\]/);if(_){var s=_[1];if(s=qqc.replace_smart_quotes(s),set_qwizard_data_b&&(qw.questions_cards[n].question_attributes=s),b=get_attr(s,"topic",!0)){debug[4]&&console.log("[process_card_attributes] card_topics: ",b),set_qwizard_data_b&&(qw.questions_cards[n].topic=b),b=b.split(/; */),deckdata[e].card_topics[n]=b;for(var o=0;o<b.length;o++){var l=b[o];-1==deckdata[e].topics.indexOf(l)&&deckdata[e].topics.push(l)}}else deckdata[e].card_topics[n]=["Other"],r=!0;var h=get_attr(s,"dataset_id");h&&(deckdata[e].dataset_id[n]=h);var k=get_attr(s,"unit");k&&(deckdata[e].unit[n]=k,set_qwizard_data_b&&(qw.questions_cards[n].unit=k));var u=get_attr(s,"card_back");u?deckdata[e].card_back_background[n]=u:(u=get_attr(s,"card_back_image"))&&(deckdata[e].card_back_background[n]="img:"+u),u&&(deckdata[e].default_card_back_background||(deckdata[e].default_card_back_background=q.ruled_lines));var p=get_attr(s,"use_dataset_card");p&&(deckdata[e].use_dataset_card_ids[n]=p,deckdata[e].dataset_id[n]=p,set_qwizard_data_b&&(qw.questions_cards[n].from_dataset_b=!0))}}r&&-1==deckdata[e].topics.indexOf("Other")&&deckdata[e].topics.push("Other"),debug[4]&&console.log("[process_card_attributes] deckdata[i_deck].card_topics:",deckdata[e].card_topics),deckdata[e].topic_statistics={};for(var m=deckdata[e].topics.length,g=0;g<m;g++){l=deckdata[e].topics[g];deckdata[e].topic_statistics[l]={},deckdata[e].topic_statistics[l].n_cards=0,deckdata[e].topic_statistics[l].n_reviewed=0}for(n=0;n<d;n++){var b;if(b=deckdata[e].card_topics[n]){debug[4]&&console.log("[process_card_attributes] i_card:",n,", card_topics: "+b);for(m=b.length,g=0;g<m;g++){l=b[g];deckdata[e].topic_statistics[l].n_cards++}}}},this.start_deck=function(e,t){if(debug[0]&&console.log("[start_deck] deckdata[i_deck].i_card:",deckdata[e].i_card),0!=deckdata[e].n_cards&&!q.preview){if(qqc.is_mobile()&&q.go_mobile(e),t&&(deckdata[e].deck_started_b=!0),!t&&!q.qwizard_b&&deckdata[e].qrecord_id){var a="undefined"!=typeof document_qwiz_user_logged_in_b&&document_qwiz_user_logged_in_b&&"undefined"!=typeof document_qwiz_username;if(!(a||"undefined"!=typeof document_qwiz_declined_login_b&&document_qwiz_declined_login_b))return q.display_login(e),!1;if(a){if($.cookie("qwiz_current_login_lt_nmin_ago")){if(document_qwiz_team_b&&!confirm(T("You are logged in as team")+": "+document_qwiz_username+".\n"+T("Do you want to continue as this team?"))){document_qwiz_session_id=document_qwiz_session_id.split(";")[0],document_qwiz_username=document_qwiz_username.split("; ")[0],document_qwiz_team_b=!1,qqc.set_user_menus_and_icons();var d=T("OK.  Only %s is logged in now");d=d.replace("%s",document_qwiz_username),alert(d)}}else{var r="";if(document_qwiz_team_b&&(r=" "+T("a team")+":"),!confirm(T("You are logged in as")+r+" "+document_qwiz_username+".\n"+T('Do you want to continue?  (Click "Cancel" to sign out)')))return qqc.sign_out(),deckdata[e].deck_started_b=!0,q.process_card(e),!1;var c={path:"/",expires:qqc.get_qwiz_param("login_timeout_min",40)/1440};$.cookie("qwiz_current_login_lt_nmin_ago",1,c)}if(deckdata[e].qrecord_id&&document_qwiz_user_logged_in_b){deckdata[e].record_start_b=!1;var n=(new Date).getTime()/1e3,i={qrecord_id_ok:deckdata[e].qrecord_id_ok,type:"start",now_sec:n,confirm:"js"};qqc.jjax(qname,e,deckdata[e].qrecord_id,"record_qcard_v2",i)}}}deckdata[e].use_dataset?deckdata[e].dataset_intro_f?(deckdata[e].i_card=-1,q.display_login(e,!1,"use_dataset_options")):(deckdata[e].i_card=0,qqc.get_dataset_questions(deckdata[e].use_dataset,qname,e,deckdata[e].qrecord_id,[],[],1e4,deckdata[e].dataset_questions_to_do,deckdata[e].random_b,deckdata[e].use_dataset_card_html)):q.start_deck2(e)}},this.start_deck2=function(e,t){deckdata[e].i_card=void 0!==t?t:0,deckdata[e].n_got_it=0,deckdata[e].n_reviewed=0;var a=deckdata[e].n_cards;deckdata[e].n_to_go=a;var d=0;a>1||!deckdata[e].click_flip_b||deckdata[e].cards[0].textentry_required_b?q.set_next_buttons(e):d=deckdata[e].header_height+20,(d||deckdata[e].spacing)&&(d?d+=-20+deckdata[e].spacing:d=80+deckdata[e].spacing,deckdata[e].$qcard_window.css({"margin-bottom":d+"px"}));for(var r=0;r<a;r++)deckdata[e].cards[r].got_it=!1;deckdata[e].bck_f=!1,deckdata[e].user_card_number=0;for(r=0;r<a;r++){var c=deckdata[e].cards[r];c.user_card_number=void 0,c.i_user_next_card=void 0,c.i_user_prev_card=void 0,c.saved_textentry="",c.saved_textentry_ok=!1}deckdata[e].hide_forward_back_b||($(".bbfe-qdeck"+e).css({visibility:"visible",color:"lightgray"}).removeClass("hover"),$("span.card-number-qdeck"+e).css({visibility:"visible"}).html(1)),deckdata[e].use_dataset&&deckdata[e].dataset_intro_f&&$(".bck-card-qdeck"+e).first().css({color:"gray"}).addClass("hover");for(var n=deckdata[e].topics.length,i=0;i<n;i++){var _=deckdata[e].topics[i];deckdata[e].topic_statistics[_].n_reviewed=0}q.init_card_order(e),deckdata[e].deck_started_b=!0,void 0!==t&&deckdata[e].i_card>=0&&deckdata[e].i_card<a&&(deckdata[e].no_flip_b=!1),deckdata[e].$qcard_card_back.css({display:""}),showing_front(e)||q.qdeck_flip(e),q.process_card(e,!1,!0)},this.show_response_recorded=function(e){var t=deckdata[e].i_card,a=deckdata[e].cards,d=a[t],r=DateFormat.format.date((new Date).getTime(),"h:mm:ss");$("span.response_recorded_wrapper-qdeck"+e).css({display:"inline-block"});var c=$("span.response_recorded-qdeck"+e),n=a[d.i_user_prev_card].user_card_number;c.addClass("response_recorded_jump").attr("title","Response to card "+n+" recorded "+r);setTimeout(function(){c.removeClass("response_recorded_jump")},500)},this.pay_lock_settings=function(e,t,a,d){qqc.pay_lock_settings(qname,deckdata,n_decks,t,a,d,e)},this.go_mobile=function(e){non_mobile_scrollLeft=window.scrollX,non_mobile_scrollTop=window.scrollY;var t=deckdata[e].$qcard_window;if(deckdata[e].deck_style=t.attr("style"),t.removeAttr("style").removeAttr("width").removeClass("qcard_window").addClass("qdeck-mobile qwizard_qwiz_deck_div"),parent!==window||deckdata[e].$next_buttons.find("button").removeClass("qwiz_button").addClass("qwiz_button_small"),t.after('<div id="deck_div_placeholder"></div>'),t.appendTo("body"),window.scrollTo(0,0),deckdata[e].$qcard_window.css({width:"","min-height":""}),$("body").css({overflow:"hidden"}),qqc.is_mobile()||!document_qwiz_force_mobile_f){if($(".go-mobile-qdeck"+e).hide(),!document_qwiz_force_mobile_f){$(".exit-mobile-qdeck"+e).show(),$("#icon-exit-mobile-qdeck"+e).show(),$("#summary-deck"+e).find("button.summary_exit_mobile_deck").show();var a=navigator.userAgent.toLowerCase();-1!=a.indexOf("firefox")&&-1!=a.indexOf("mobile")&&$("div.qdeck-mobile").css({"padding-bottom":"10vh"})}document_qwiz_mobile="mobile_",mobile_i_deck=e}},this.open_panel_exit_mobile=function(e){$("#overlay-exit-mobile-qdeck"+e).show().animate({top:"0px"},500),panel_exit_mobile_open_b=!0,$("#icon-exit-mobile-qdeck"+e).hide()},this.close_panel_exit_mobile=function(e){return $(e).animate({top:"-100px"},500,function(){$(this).hide(),$("div.icon-exit-mobile-qwiz").show()}),panel_exit_mobile_open_b=!1,panel_exit_mobile_just_closed_b=!0,!1},this.exit_mobile=function(e){var t=deckdata[e].$qcard_window;t.attr("style",deckdata[e].deck_style).removeClass("qdeck-mobile qwizard_qwiz_deck_div").addClass("qcard_window"),deckdata[e].$next_buttons.find("button").removeClass("qwiz_button_small").addClass("qwiz_button"),$("#deck_div_placeholder").replaceWith(t),$("body").css({overflow:""}),window.scrollTo(non_mobile_scrollLeft,non_mobile_scrollTop),deckdata[e].$qcard_window.css({width:deckdata[e].card_width_setting,"min-height":deckdata[e].card_height_setting}),$("#overlay-exit-mobile-qdeck"+e).css({top:"-100px",display:"none"}),$(window).off("scroll"),$("div.icon-exit-mobile-qwiz, div.icon-panel-exit-mobile-qwiz").hide(),$(".exit-mobile-qdeck").hide(),$("button.summary_exit_mobile_deck").hide(),qqc.is_mobile()&&$(".go-mobile-qdeck"+e).show(),document_qwiz_mobile="",panel_exit_mobile_just_closed_b=!1},this.init_card_order=function(e){var t=deckdata[e].n_cards;deckdata[e].card_order=new Array(t);for(var a=0;a<t;a++)deckdata[e].card_order[a]=a;deckdata[e].random_b&&(deckdata[e].card_order=shuffle(deckdata[e].card_order),debug[0]&&console.log("[init_card_order] deckdata[i_deck].card_order:",deckdata[e].card_order))},this.set_next_buttons=function(e){var t="",a="",d="qwiz_button ";qqc.is_mobile()&&(parent!==window||(d="qwiz_button_small "));var r=d,c="Flip";deckdata[e].hide_flip_b&&(q.qwizard_b?(r="qwizard_gray ",c="Flip (click disabled)"):a='style="display: none;" '),t+='<button class="'+r+"flip flip-qdeck"+e+'" '+a+'onclick="'+qname+".qdeck_flip ("+e+')" title="'+T("Show the other side")+'">'+T(c)+"</button> &nbsp; ",deckdata[e].n_to_go>1&&(deckdata[e].hide_gotit_b?t+=next_button_active_b?'<button class="'+d+"next_card-qdeck"+e+'" onclick="'+qname+".next_card ("+e+')" title="'+T("Put this card at the bottom of the stack, show the next card")+'">'+T("Next card")+"</button> &nbsp; ":'<button class="'+d+"qwiz_button_disabled next_card-qdeck"+e+'" disabled="true" onclick="'+qname+".next_card ("+e+')" title="'+T("Put this card at the bottom of the stack, show the next card")+'">'+T("Next card")+"</button> &nbsp; ":t+='<button class="'+d+"qwiz_button_disabled next_card-qdeck"+e+'" disabled="true" onclick="'+qname+".next_card ("+e+')" title="'+T("Put this card at the bottom of the stack, show the next card")+'">'+T("Need more practice")+"</button> &nbsp; "),a="",deckdata[e].hide_gotit_b&&(a='style="display: none;" '),t+=next_button_active_b?'<button class="'+d+"got_it got_it-qdeck"+e+'" '+a+'onclick="'+qname+".got_it ("+e+')" title="'+T("Remove this card from the stack")+'">'+T("Got it!")+"</button> &nbsp; ":'<button class="'+d+"qwiz_button_disabled got_it got_it-qdeck"+e+'" '+a+'disabled="true" onclick="'+qname+".got_it ("+e+')" title="'+T("Remove this card from the stack")+'">'+T("Got it!")+"</button> &nbsp; ",deckdata[e].n_to_go>1&&(a="",deckdata[e].hide_shuffle_b&&(a='style="display: none;" '),t+='<button class="'+d+"shuffle-qdeck"+e+'" '+a+'onclick="'+qname+".shuffle_order ("+e+')" title="'+T("Randomly shuffle the remaining cards")+'">'+T("Shuffle")+"</button> &nbsp; "),debug[5]&&console.log("[set_next_buttons] htm:",t),deckdata[e].$next_buttons.html(t).css({visibility:"visible"})},this.process_card=function(e,t,a){if(debug[0]&&console.log("[process_card] i_deck:",e),0!=deckdata[e].n_to_go||q.qwizard_b){for(var d=deckdata[e].i_user_card;;){var r,c;if(q.qwizard_b?r=deckdata[e].i_card:(c=deckdata[e].ii_card,debug[0]&&console.log("[process_card] ii_card:",c),c>=deckdata[e].n_cards&&(c=0,deckdata[e].ii_card=0),r=deckdata[e].card_order[c]),!deckdata[e].cards[r].got_it){deckdata[e].card_reviewed_b=!1,deckdata[e].qrecord_id&&(deckdata[e].current_first_flip_sec=0,deckdata[e].n_flips=0,deckdata[e].current_first_textentry_sec=0),next_button_active_b||$("button.got_it-qdeck"+e+", button.next_card-qdeck"+e).attr("disabled",!0).addClass("qwiz_button_disabled"),1==deckdata[e].n_to_go&&$("button.next_card-qdeck"+e+", button.shuffle-qdeck"+e).attr("disabled",!0).addClass("qwiz_button_disabled");var n=deckdata[e].cards[r];if(n.i_user_prev_card=d,-1==d)deckdata[e].i_dataset_intro_user_next_card=r;else deckdata[e].cards[d].i_user_next_card=r,q.qwizard_b||$(".bck-card-qdeck"+e).css({color:"gray"}).addClass("hover");deckdata[e].i_card=r,deckdata[e].i_user_card=r,void 0===n.user_card_number&&(deckdata[e].user_card_number++,n.user_card_number=deckdata[e].user_card_number),q.qwizard_b||$("span.card-number-qdeck"+e).html(n.user_card_number),q.set_card_front_and_back(e,r,a),q.qwizard_b&&(qwizard.set_qwizard_data("i_question",r),qwizard.go_to_card2());break}deckdata[e].ii_card++}deckdata[e].ii_card++}else if(deckdata[e].n_cards>1){var i=deckdata[e].i_user_card,_=deckdata[e].n_cards;deckdata[e].cards[_]={i_user_prev_card:i},deckdata[e].cards[i].i_user_next_card=_,q.done(e,t)}},this.done=function(e,t){showing_front(e)||q.qdeck_flip(e),deckdata[e].$progress_text.html("&nbsp;"),q.qwizard_b||$(".bck-card-qdeck"+e).css({color:"gray"}).addClass("hover"),$("span.card-number-qdeck"+e).html("--"),q.preview||(deckdata[e].$qcard_card_back.hide(),deckdata[e].$next_buttons.css({visibility:"hidden"}));var a=[];a.push('<div class="flashcard_summary">');var d=deckdata[e].n_cards;if(deckdata[e].summary_b){var r,c=deckdata[e].n_reviewed;c==d?r=T("In this %s-flashcard stack, you clicked")+" &ldquo;"+T("Got it!")+"&rdquo; "+T("on the first try for every card")+".":(r=T("This flashcard stack had %s cards.")+" ",r+=T("It took you")+" "+qqc.number_to_word(c)+" "+Tplural("try","tries",c)+" "+T("until you felt comfortable enough to click")+" &ldquo;"+T("Got it!")+"&rdquo; "+Tplural("for this card","for each card",d)+"."),r=r.replace("%s",qqc.number_to_word(d)),a.push("<p>"+r+"</p>");var n,i=0;if(deckdata[e].topics&&(i=deckdata[e].topics.length),1==i){if("Other"!=(o=deckdata[e].topics[0]))n=1==d?T("This"):2==d?T("Both"):T("All")+" "+qqc.number_to_word(d),a.push("<p>"+n+" "+Tplural("card was","cards were",d)+" about topic &ldquo;"+o+".&rdquo;</p>")}else if(i>1&&c>d){for(var _=[],s=0;s<i;s++){var o=deckdata[e].topics[s],l=deckdata[e].topic_statistics[o].n_cards,h=deckdata[e].topic_statistics[o].n_reviewed;if(debug[4]&&console.log("[done] topic:",o,", i_topic_n_cards:",l,", i_topic_n_reviewed:",h),h>l){var k="<strong>"+o+"</strong>: "+qqc.number_to_word(l)+" "+Tplural("card","cards",l)+", "+qqc.number_to_word(h)+" "+T("tries");_.push(k)}}var u=_.length,p='<p class="topic_list">';if(u>1){p+=T("These are the topics of cards where you clicked");for(var m=0;m<u;m++)_[m]="&bull; "+_[m]}else p+=T("This is the only topic for which you clicked");p+=" &ldquo;"+T("Need more practice")+"&rdquo;:<br />",p+=_.join("; ")+".",p+="</p>",a.push(p)}}a.push("</div>"),a.push(deckdata[e].exit_html),a=a.join("\n"),q.qwizard_b?q.set_editable_parts_front(e,-1,a):(a=qqc.decode_image_tags(a),q.preview?q.get_card_front(e,d).html(a):q.get_card_front(e).html(a),-1!=a.indexOf("mjp-s-wrapper")&&setTimeout(delay_mp3_player_reset,200)),deckdata[e].i_card=d,deckdata[e].i_user_card=d,document_qwiz_mobile?$("button.summary_exit_mobile_deck").show():$("button.summary_exit_mobile_deck").hide();var g=$("div.qcard_card-qdeck"+e+" span.unpaid_msg");if(g.length){var b=deckdata[e].pay_quiz_ok;b&&"paid"==b?g.hide():g.show()}var f=$("div.qcard_card-qdeck"+e+" span.unpaid_msg_payment_type");if(f.length&&"paid"!=deckdata[e].pay_quiz_ok){var v=deckdata[e].taker_unpaid_msgs;if(v.length){var w=Math.floor(Math.random()*v.length);f.html(v[w])}}if(q.preview||(deckdata[e].no_flip_b=!0,deckdata[e].deck_started_b=!1),q.set_container_width_height(e),deckdata[e].qrecord_id&&document_qwiz_user_logged_in_b&&!t){setTimeout(function(){var t={type:"completed",now_sec:(new Date).getTime()/1e3,confirm:"js"};qqc.jjax(qname,e,deckdata[e].qrecord_id,"record_qcard_v2",t)},2e3)}},this.display_progress=function(e){var t;t="<p>"+deckdata[e].n_cards+" "+T("cards total")+", "+deckdata[e].n_reviewed+" "+Tplural("card","cards",deckdata[e].n_reviewed)+" "+T("reviewed"),deckdata[e].hide_gotit_b||(t+=", "+deckdata[e].n_to_go+" "+Tplural("card","cards",deckdata[e].n_to_go)+" "+T("to go")+"</p>"),deckdata[e].$progress_text.html(t)},this.hide_menu_and_display_login=function(e,t,a,d,r,c){var n=$("div.qwiz_icon_and_menu_container.qdeck"+e+" div.qwiz_icon_trigger_and_menu");n.removeClass("qwiz-hover"),q.display_login(e,t,a,d,r,c);setTimeout(function(){n.addClass("qwiz-hover")},500)},this.display_login=function(e,t,a,d,r,c){a||(a=""),t||a||$("div.qwiz-usermenu_icon").removeClass("qwiz-icon-bounce"),showing_front(e)||(deckdata[e].check_answer_disabled_b=!1,deckdata[e].no_flip_b=!1,q.qdeck_flip(e)),deckdata[e].no_flip_b=!0,deckdata[e].deck_started_b=!1,$(".bbfe-qdeck"+e).css({visibility:"hidden"}),$("span.card-number-qdeck"+e).css({visibility:"hidden"}),"progress_bars"==a||"leaderboard"==a?qqc.create_progress_bars(qname,deckdata,e,a):"feedback"==a?qqc.create_provide_feedback_screen(qname,e,deckdata[e].i_card):"use_dataset_options"==a?qqc.create_use_dataset_options(qname,deckdata,e):"pay"==a?qqc.create_pay_screen(qname,deckdata,e,d,c):"maker_pay"==a?qqc.create_maker_pay_screen(qname,deckdata,e,d):"enroll"==a?qqc.create_enroll_screen(qname,e):"register"==a?qqc.create_register_taker_screen(qname,e):(deckdata[e].$qcard_card_front.html(get_login_html(e,t,d,r)),deckdata[e].deck_started_b=!1,qqc.init_hide_show_password("#qdeck_password-qdeck"+e),$("#qdeck_username-qdeck"+e).focus()),deckdata[e].$next_buttons.css("visibility","hidden")},this.qdeck_password_focus=function(e,t){e.qwiz_pw="",e.value="",$("#qdeck_login-qdeck"+t+" p.login_error").css({display:"none"})},this.login=function(e,t,a){t=t?1:0,a=a?1:0,$.removeCookie("qwiz_declined_login",{path:"/"}),document_qwiz_declined_login_b=!1;var d=$("#qdeck_username-qdeck"+e),r=d.val();if(!r)return alert(T("Please enter Login name")),d.focus(),!1;if(t&&-1!=document_qwiz_username.split("; ").indexOf(r))return alert("User "+r+" is already on your team."),!1;var c=$("#qdeck_password-qdeck"+e),n=c.val();if(!n)return alert(T("Please enter Password")),c.focus(),!1;c.blur();var i,_=CryptoJS.SHA3(n).toString();t?i=document_qwiz_remember_f:(i=$("#qdeck_login-qdeck"+e+' input[type="checkbox"]').prop("checked")?1:0,document_qwiz_remember_f=i);var s={username:r,sha3_password:_,remember_f:i,add_team_member_f:t};return t&&(s.previous_username=document_qwiz_username),a&&(s.proceed_to_pay_f="1"),qqc.jjax(qname,e,deckdata[e].qrecord_id,"login",s),!1},this.login_ok=function(e,t,a,d){debug[0]&&console.log("[login_ok] i_deck:",e);var r={path:"/"};1==a&&(r.expires=1),$.cookie("qwiz_session_id",document_qwiz_session_id,r),r.expires=30,$.cookie("qwiz_user_login",1,r),document_qwiz_user_logged_in_b=!0;var c=qqc.get_qwiz_param("login_timeout_min",40);if(r.expires=c/1440,$.cookie("qwiz_current_login_lt_nmin_ago",1,r),qqc.set_user_menus_and_icons(),qwiz_&&qwiz_.any_pay_quiz_f&&qwiz_.pay_lock_settings(),qcard_&&qcard_.any_pay_deck_f&&qcard_.pay_lock_settings(),$("#qdeck_login-qdeck"+e).hide(),q.qrecord_b)for(var n=0;n<n_decks;n++)deckdata[n].qrecord_id&&(deckdata[n].record_start_b=!0),deckdata[n].qrecord_id&&(deckdata[n].qrecord_id_ok="check credit");return d&&"paid"==deckdata[e].pay_quiz_ok&&(d=!1),d?q.display_login(e,!1,"pay"):-1==deckdata[e].i_card?deckdata[e].$qcard_card_front.html(qqc.decode_image_tags(deckdata[e].intro_html)):q.login_ok_start_deck(e),!1},this.login_ok_start_deck=function(e){var t=deckdata[e].i_card;if(deckdata[e].$next_buttons.css("visibility","visible"),0==t)q.start_deck(e,!0);else{deckdata[e].record_start_b=!1;var a=(new Date).getTime()/1e3,d={qrecord_id_ok:deckdata[e].qrecord_id_ok,type:"start",now_sec:a,confirm:"js"};if(qqc.jjax(qname,e,deckdata[e].qrecord_id,"record_qcard_v2",d),-1==t)q.get_card_front(e,-1).html(qqc.decode_image_tags(deckdata[e].intro_html));else $(".bbfe-qdeck"+e).css({visibility:"visible"}),$("span.card-number-qdeck"+e).css({visibility:"visible"}),t>=deckdata[e].n_cards?q.done(e):(q.set_card_front_and_back(e,t,!0),deckdata[e].no_flip_b=!1)}},this.login_not_ok=function(e){$("#qdeck_login-qdeck"+e+" p.login_error").css("display","block"),debug[0]&&console.log("[login_not_ok] $ ('#qdeck_login-qdeck"+e+" p.login_error'):",$("#qdeck_login-qdeck"+e+" p.login_error"))},this.no_login=function(e,t,a,d){debug[0]&&console.log("[no_login] e:",d),a&&d&&d.stopPropagation(),t||a||$("#qdeck_login-qdeck"+e+' input[type="checkbox"]').prop("checked")&&($.cookie("qwiz_declined_login",1,{path:"/"}),document_qwiz_declined_login_b=!0),$("div.qwiz-usermenu_icon").removeClass("qwiz-icon-bounce"),deckdata[e].$next_buttons.css("visibility","visible");var r=deckdata[e].i_user_card;-1==r?a?q.get_card_front(e,-1).html(qqc.decode_image_tags(deckdata[e].intro_html)):q.start_deck(e,!0):(r==deckdata[e].n_cards?q.done(e):(q.set_card_front_and_back(e,r,!0),deckdata[e].no_flip_b=!1),$(".bbfe-qdeck"+e).css({visibility:"visible"}),$("span.card-number-qdeck"+e).css({visibility:"visible"}));setTimeout(function(){showing_front(e)||(deckdata[e].check_answer_disabled_b=!1,q.qdeck_flip(e))},50)},this.icon_no_login=function(e){$("div.qwiz-usermenu_icon").removeClass("qwiz-icon-bounce"),$("#usermenu-qdeck"+e+' input[type="checkbox"]').prop("checked")&&($.cookie("qwiz_declined_login",1,{path:"/"}),document_qwiz_declined_login_b=!0),$("#usermenu-qdeck"+e).hide()},this.qdeck_flip=function(e,t){if(debug[0]&&console.log("[flip] i_deck:",e,", deckdata[i_deck].i_card:",deckdata[e].i_card,", deckdata[i_deck].no_flip_b:",deckdata[e].no_flip_b),void 0!==t){if(-1==t||t==deckdata[e].n_cards)return!1}else t=deckdata[e].bck_f?deckdata[e].i_user_card:deckdata[e].i_card;if(deckdata[e].no_flip_b)return deckdata[e].deck_started_b&&(deckdata[e].no_flip_b=!1),!1;var a=deckdata[e].cards[t];if(a.single_char_b||!deckdata[e].check_answer_disabled_b){var d;q.preview?(d=$("div#qcard_window-qdeck"+e+" div.card-container.preview-qcard"+t+" div.qcard_card-qdeck"+e+" div.qcard-front"),$("div#qcard_window-qdeck"+e+" div.card-container.preview-qcard"+t+" div.qcard_card-qdeck"+e+" div.qcard-back")):(d=q.get_card_front(e),get_card_back(e),$("div.qcard_card-qdeck"+e+" div.qcard-front"),$("div.qcard_card-qdeck"+e+" div.qcard-back"));var r=d.find("input.textentry-qdeck"+e),c=!1,n="";if(q.preview&&(n=" preview-qcard"+deckdata[e].i_card),showing_front(e)){if(deckdata[e].qrecord_id&&document_qwiz_user_logged_in_b&&(deckdata[e].n_flips++,deckdata[e].record_start_b&&document_qwiz_user_logged_in_b)){deckdata[e].record_start_b=!1;var i=(new Date).getTime()/1e3,_={qrecord_id_ok:deckdata[e].qrecord_id_ok,type:"start",now_sec:i,confirm:"js"};qqc.jjax(qname,e,deckdata[e].qrecord_id,"record_qcard_v2",_)}if(1==deckdata[e].user_card_number&&($("div#icon_qdeck"+e).hide(),alert_not_logged_in(e)),$(button_flip_selector(e)).html(T("Flip back")).removeClass("qwiz_button_disabled").removeAttr("disabled"),deckdata[e].bck_f||$("button.got_it-qdeck"+e+", button.next_card-qdeck"+e).attr("disabled",!1).removeClass("qwiz_button_disabled"),!deckdata[e].card_reviewed_b&&!deckdata[e].bck_f){deckdata[e].card_reviewed_b=!0,deckdata[e].n_reviewed++;var s=deckdata[e].card_topics[t];if(debug[4]&&console.log("[flip] card_topics:",s),s)for(var o=0;o<s.length;o++){var l=s[o];deckdata[e].topic_statistics[l].n_reviewed++}if(deckdata[e].n_cards>1&&q.display_progress(e),deckdata[e].qrecord_id){i=(new Date).getTime()/1e3;deckdata[e].current_first_flip_sec=i}}r.length&&(r.blur(),a.textentry_required_b?q.textentry_set_card_back(e,t):(c=r.val())?(a.saved_textentry=c,$("p.back_textentry_p-qdeck"+e+n).css("visibility","visible"),$("span.back_textentry-qdeck"+e+n).html(c)):$("p.back_textentry_p-qdeck"+e+n).css("visibility","hidden")),"back"}else"front",$(button_flip_selector(e)).html(a.check_answer);if(q.preview)$("div.card-container.preview-qdeck"+e+".preview-qcard"+t+" div.qcard_card").flip("toggle");else if(deckdata[e].flip_axis){deckdata[e].$qcard_card.flip({axis:deckdata[e].flip_axis});setTimeout(function(){deckdata[e].$qcard_card.flip("toggle")},20)}else deckdata[e].$qcard_card.flip("toggle");return deckdata[e].showing_front_b&&setTimeout("qcard_.set_container_width_height ("+e+", "+t+")",700),toggle_showing_front(e),q.qwizard_b&&(showing_front(e)?qqc.select_placeholder(deckdata[e].$qcard_front_part1):qqc.select_placeholder(deckdata[e].$qcard_back_part1)),!1}a.textentry_required_b&&(alert(Tcheck_answer_message),$("#textentry_hint-qdeck"+e).removeAttr("disabled").removeClass("qwiz_button_disabled").show())},this.set_card_front_and_back=function(e,t,a,d){debug[0]&&console.log("[set_card_front_and_back] i_deck:",e,", i_card:",t),q.preview?$("div.card-container.preview-qdeck"+e+".preview-qcard"+t+" div.qcard-front-back"):deckdata[e].$qcard_card_front_back,deckdata[e].n_cards>1&&q.display_progress(e);var r,c,n=deckdata[e].cards[t];$(button_flip_selector(e)).removeAttr("disabled").removeClass("qwiz_button_disabled"),deckdata[e].check_answer_disabled_b=!1;var i=-1,_="",s=function(){q.preview?r=q.get_card_front(e,t):(r=q.get_card_front(e),q.get_card_front(e,t,!0).hide());if(r.css({display:"inline-block"}),q.qwizard_b&&!deckdata[e].use_dataset_card_ids[t]?q.set_editable_parts_front(e,t,n.card_front):r.html(qqc.decode_image_tags(n.card_front)),q.no_intro_b[e]&&0==deckdata[e].n_reviewed){if(!deckdata[e].hide_qwizcards_icon_b){var a=create_qwiz_icon_div(e);deckdata[e].$qcard_card.append(a)}q.qwiz_icon_stop_propagation(e)}var c=r.find("input.textentry-qdeck"+e);if(c.length){var s="";d&&n.saved_textentry&&(s=n.saved_textentry,n.saved_textentry_ok&&($(button_flip_selector(e)).removeAttr("disabled").removeClass("qwiz_button_disabled").html(T("Flip")),deckdata[e].check_answer_disabled_b=!1)),c.val(s),0==deckdata[e].n_reviewed&&q.no_intro_b[e]||(panel_exit_mobile_just_closed_b=!0,_=c),deckdata[e].click_flip_b&&c.click(function(e){e.stopPropagation(),debug[0]&&console.log("[set_card_front_and_back] click event:",e)})}else if(void 0!==deckdata[e].hangman[t]){var o=deckdata[e].hangman[t],l=o.n_hangman;o.n_hangman_done=0,o.n_hangman_correct=0;for(var h=!0,k=deckdata[e].answered_correctly[t],u=0;u<l;u++){var p=r.find("span.qdeck_hangman.qdeck_hangman_c"+u),m=o.hangman_final_entry[u];if(d)-1==(g=o.hangman_current_entry[u]).indexOf("<u>\t</u>")&&(o.n_hangman_done++,o.n_hangman_correct++),g=g.replace(/\t/g,"&ensp;"),p.find("span.hangman_current_entry").html(g),p.find("span.hangman_type_letters").hide();else if(l>1&&!k&&!1===k&&(p.find("span.hangman_current_entry").html(g),o.hangman_incorrect_chars[u].length<=3&&0==o.hangman_n_hints[u]))p.find("span.hangman_current_entry").html(m),p.find("span.hangman_type_letters").hide(),o.n_hangman_done++,o.n_hangman_correct++;else{var g=m.replace(/>[a-z0-9]</gi,">&ensp;<");o.hangman_current_entry[u]=g.replace(/u>&ensp;</g,"u>\t<"),p.find("span.hangman_current_entry").html(g);var b,f=p.find("input");q.qwizard_b&&"placeholder"==o.hangman_answer[u]||(f.removeAttr("disabled"),$("#hangman_hint-qdeck"+e).removeAttr("disabled").removeClass("qwiz_button_disabled")),o.hangman_incorrect_chars[u]="",o.hangman_n_hints[u]=0,deckdata[e].click_flip_b&&f.click(function(e){e.stopPropagation(),debug[0]&&console.log("[set_card_front_and_back] click event:",e)}),b=-1!=o.hangman_answer[u].search(/[a-z]/i)?T("Type letters in the box"):T("Type numbers in the box"),p.find("span.hangman_type_letters").html('<span class="type_letters">'+b+"</span>"),h&&(h=!1,0==deckdata[e].n_reviewed&&q.no_intro_b[e]&&(k||!1!==k)||(panel_exit_mobile_just_closed_b=!0,i=u))}}"hangman_labeled_diagram"==deckdata[e].cards[t].type&&(q.qwizard_b?(r.find("div.hangman_label").addClass("ui-draggable ui-draggable-handle ui-resizable"),qwizzled.reinit_dragging(r)):r.find("div.hangman_label").each(function(){var e=$(this),t=e.outerWidth();e.outerWidth(1.2*t)}))}if($().mediaelementplayer&&$("div.qcard-front .wp-audio-shortcode, div.qcard-front .wp-video-shortcode").not(".mejs-container").filter(function(){return!$(this).parent().hasClass("mejs-mediaelement")}).mediaelementplayer(),deckdata[e].click_flip_b){setTimeout(function(){deckdata[e].$qcard_card_front.find('div.mejs-container, input[onclick^="play_mp3"], div.qwiz_no_click_flip, .mjp-s-wrapper').click(function(e){e.stopPropagation()})},250)}},o=function(){q.preview?c=get_card_back(e,t):(c=get_card_back(e),get_card_back(e,t,!0).hide());c.css({display:"inline-block"}),q.qwizard_b&&!deckdata[e].use_dataset_card_ids[t]?set_editable_parts_back(e,n.card_back):c.html(qqc.decode_image_tags(n.card_back));var a,d=deckdata[e].default_card_back_background,r=deckdata[e].card_back_background[t];if(r&&(d=r),d&&(a="img:"==d.substr(0,4)?{"background-image":"url("+d.substr(4)+")"}:{background:d},c.parents(".qcard-back").css(a)),$().mediaelementplayer&&$("div.qcard-back .wp-audio-shortcode, div.qcard-back .wp-video-shortcode").not(".mejs-container").filter(function(){return!$(this).parent().hasClass("mejs-mediaelement")}).mediaelementplayer(),deckdata[e].click_flip_b){setTimeout(function(){deckdata[e].$qcard_card_back.find('div.mejs-container, input[onclick^="play_mp3"], div.qwiz_no_click_flip, .mjp-s-wrapper').click(function(e){e.stopPropagation()})},250)}},l=function(){if(setTimeout(function(){$("div.qcard-front-back .mejs-container").css({"min-width":"300px"})},200),void 0!==deckdata[e].hangman[t]&&(q.qwizard_b||deckdata[e].bck_f||($(button_flip_selector(e)).addClass("qwiz_button_disabled").attr("disabled",!0),deckdata[e].check_answer_disabled_b=!0)),document_active_qwiz_qdeck&&$(document_active_qwiz_qdeck).find("div.qdeck-focusable input").focus().blur(),n.textentry_required_b)q.init_textentry_autocomplete(e,t);else{var a=q.qwizard_b&&deckdata[e].hide_flip_b?"Flip (click disabled)":"Flip";$(button_flip_selector(e)).html(T(a)).attr("title",T("Show the other side")),n.check_answer=T(a)}(q.set_container_width_height(e,t,n.textentry_required_b),deckdata[e].scroll_b||document_qwiz_mobile)&&(deckdata[e].$qcard_card.find("div.qcard-front, div.qcard-back").css({overflow:"auto"}),deckdata[e].$qcard_card_front_back.scrollLeft(0).scrollTop(0))};if(showing_front(e))s(),o(),l(),i>=0&&hangman_focus(e,i);else{s();setTimeout(function(){a||q.qdeck_flip(e);setTimeout(function(){o(),l(),_&&_.focus(),i>=0&&hangman_focus(e,i)},700)},100)}deckdata[e].first_display_f?deckdata[e].first_display_f=!1:"undefined"!=typeof MP3_JPLAYER&&(-1==n.card_front.indexOf("mjp-s-wrapper")&&-1==n.card_back.indexOf("mjp-s-wrapper")||setTimeout(delay_mp3_player_reset,200))},this.set_editable_parts_front=function(e,t,a){debug[0]&&console.log("[set_editable_parts_front] card_front:",a);var d,r,c=!1,n="",i=[];if(-1!=(a=qqc.shortcodes_to_video_elements(a)).indexOf("qcard_textentry"))n=new RegExp('<div class="qcard_textentry[^>]*[^]*?</div>\x3c!-- END --\x3e',"g");else if(-1!=a.indexOf("qcard_single_char_entry"))n=new RegExp('<div class="qcard_single_char_entry[^>]*[^]*?</div>\x3c!-- END --\x3e',"g");else if(-1!=a.indexOf("hangman_img_wrapper")){c=!0;var _=a.search(/<div[^>]+hangman_labeled_diagram_fields/);d=qqc.find_matching_block(a.substr(_)),a=a.replace(d,"")}else-1!=a.indexOf("qdeck_hangman")&&(n=new RegExp('<span class="qdeck_hangman[^>]*[^]*?</span>\x3c!-- END --\x3e',"g"),i=a.match(n),r=a.split(n));if(n&&(i=a.match(n),r=a.split(n)),i.length){debug[9]&&(console.log("[set_editable_parts_front] divs:",i),console.log("[set_editable_parts_front] splits:",r));var s=i.length;add_editable_parts(e,s),$("#qcard_front-part0-qdeck"+e).hide(),$("div.qcard_front-parts, div.qcard_front-inputs").html("").hide();for(var o=0;o<s;o++){var l=o+1,h=qqc.remove_unmatched_tag(r[o],1==l);$("#qcard_front-part"+l+"-qdeck"+e).html(h).css({display:""}),$("#qcard_front-input"+l+"-qdeck"+e).html(i[o]).css({display:""})}l=s+1,h=qqc.remove_unmatched_tag(r[s],!1,!0);$("#qcard_front-part"+l+"-qdeck"+e).html(h).css({display:""})}else{for(var k=3;;){var u=$("div#qcard_front-input"+(k-1)+"-qdeck"+e);if(0==u.length)break;u.remove(),$("div#qcard_front-part"+k+"-qdeck"+e).remove(),k++}var p=qqc.opening_tag_shortcode_pos("<button",a);if(!c&&p<a.length){var m=a.substr(0,p);if(-1!=m.indexOf('<div class="flashcard_summary')){var g=m.indexOf("</div>")+6,b=m.substring(0,g);$("#qcard_front-part0-qdeck"+e).html(b).show(),m=m.substr(g+1)}else $("#qcard_front-part0-qdeck"+e).hide();var f=qqc.find_matching_block(a.substr(p)),v=a.substr(p+f.length);$("#qcard_front-part1-qdeck"+e).html(m).css({display:""}),$("#qcard_front-input1-qdeck"+e).html(f).show();v=delete_unmatched_p(v);$("#qcard_front-part2-qdeck"+e).html(v).css({display:""})}else if($("#qcard_front-part0-qdeck"+e).hide(),$("#qcard_front-part1-qdeck"+e).html(a).css({display:"block"}),$("#qcard_front-input1-qdeck"+e).html("").hide(),$("#qcard_front-part2-qdeck"+e).html("").hide(),c){var w=q.get_card_front(e);q.save_remove_hangman_fields(e,w),w.append(d);setTimeout(function(){w.find("div.hangman_labeled_diagram_fields").attr("data-qcard",t),qwizard.position_hangman_fields_div(),qwizard.set_hangman_label_width(w)},100),w.on("keyup",function(){qwizard.position_hangman_fields_div("",!0)})}}if(!c){w=q.get_card_front(e);q.save_remove_hangman_fields(e,w),(w=q.get_card_front(e)).off("keyup")}},this.save_remove_hangman_fields=function(e,t,a){var d=t.find("div.hangman_labeled_diagram_fields").first();if(d.length){var r=d.data("qcard"),c=d.html();qwizard.questions_cards[r].hangman_fields=c,a||d.remove();var n=deckdata[e].cards[r].card_front,i=n.search(/<div[^>]+hangman_labeled_diagram_fields/);if(-1==i)deckdata[e].cards[r].card_front+='<div class="hangman_labeled_diagram_fields" data-qcard="'+r+'">'+c+"</div>";else{var _=qqc.find_matching_block(n.substr(i)).match(/>([^]*)<\/div>$/);if(_){var s=_[1];deckdata[e].cards[r].card_front=n.replace(s,c)}}}},this.textentry_set_card_back=function(e,t,a,d){debug[0]&&console.log("[textentry_set_card_back] i_card:",t,", local_i_choice:",a);var r,c,n=deckdata[e].cards[t],i=get_card_back(e);if(void 0!==a)r=a,c=i.find("span.back_qcard_textentry").html();else{var _=(c=(q.preview?$("div#qcard_window-qdeck"+e+" div.card-container.preview-qcard"+t+" input.textentry-qdeck"+e):$("input.textentry-qdeck"+e)).val()).toLowerCase();r=-1;for(var s=n.choices.length,o=0,l=0;l<s;l++){var h=n.choices[l];if("*"==h[0])o=l;else if(-1!=h.map(function(e){return e.toLowerCase()}).indexOf(_)){r=l;break}}-1==r&&(r=o)}c||(c="___________");var k="";q.preview&&(k=" preview-qcard"+t);var u='<p class="back_textentry_p'+k+'">'+T("You entered")+' &ldquo;<span class="back_qcard_textentry'+k+'">'+c+'</span>&rdquo;</p><div id="qcard_back-part1-qdeck'+e+'" class="card_back_textentry">\n'+n.feedback_htmls[r]+"</div>";q.qwizard_b&&!deckdata[e].use_dataset_card_ids[t]?set_editable_parts_back(e,u,r,d):get_card_back(e).html(qqc.decode_image_tags(u))},window.onorientationchange=function(){if(document_qwiz_mobile){setTimeout(function(){mobile_center_vertical(mobile_i_deck)},100)}},this.set_container_width_height=function(e,t,a){if(document_qwiz_mobile)mobile_center_vertical(e);else{var d,r,c,n,i=deckdata[e].scroll_b;void 0===t&&(t=deckdata[e].i_user_card),q.preview?(d=$("div.card-window.preview-qdeck"+e+".preview-qcard"+t),r=$("div.card-container.preview-qdeck"+e+".preview-qcard"+t),$("div.card-container.preview-qdeck"+e+".preview-qcard"+t+" div.qcard-front-back"),deckdata[e].use_dataset_card_ids[t]?(c=$("div.card-container.preview-qdeck"+e+".preview-qcard"+t+" div.qcard-front div.qcard_content_size_alt"),n=$("div.card-container.preview-qdeck"+e+".preview-qcard"+t+" div.qcard-back  div.qcard_content_size_alt")):(c=$("div.card-container.preview-qdeck"+e+".preview-qcard"+t+" div.qcard-front div.qcard_content_size"),n=$("div.card-container.preview-qdeck"+e+".preview-qcard"+t+" div.qcard-back  div.qcard_content_size"))):(d=deckdata[e].$qcard_window,r=deckdata[e].$qcard_container,deckdata[e].$qcard_card_front_back,c=q.get_card_front(e),n=get_card_back(e));var _=r.find("div.qcard_card"),s=0,o=function(){var l,h,k=_.find("img");if(k.length&&0==k[0].width&&(debug[0]&&console.log("[delay_set_container_width_height] zero-width img; n_delays:",s),s<10))return s++,setTimeout(o,100),!1;if(deckdata[e].card_width_setting&&(l=deckdata[e].card_width_setting.replace("px",""),h=deckdata[e].card_height_setting.replace("px","")),i)l?(l=deckdata[e].card_width_setting.replace("px",""),h=deckdata[e].card_height_setting.replace("px",""),d.width(l),d.height(h)):(l=r.outerWidth(),h=r.outerHeight());else{var u=parseInt(c.outerWidth()),p=parseInt(c.outerHeight()),m=parseInt(n.outerWidth()),g=parseInt(n.outerHeight()),b=Math.max(u,m),f=Math.max(p,g);debug[0]&&console.log("[delay_set_container_width_height] width_front: ",u,", width_back: ",m);var v=parseInt(c.outerWidth()),w=parseInt(c.outerHeight());debug[0]&&console.log("[delay_set_container_width_height] i_deck:",e,", new_width_front: ",v,", new_height_front: ",w);var y=0,x=0;if(a)for(var A=deckdata[e].cards[t].choices.length,z=0;z<A;z++){q.textentry_set_card_back(e,t,z);var C=parseInt(n.find("#qcard_back-part1-qdeck"+e).outerWidth()),T=parseInt(n.find("#qcard_back-part1-qdeck"+e).outerHeight());y=Math.max(y,C),x=Math.max(x,T)}else y=parseInt(n.outerWidth()),x=parseInt(n.outerHeight());var I=Math.max(v,y),O=Math.max(w,x);debug[13]&&(console.log("[delay_set_container_width_height] new_width_front: ",v,", new_width_back: ",y),console.log("[delay_set_container_width_height] new_height_front: ",w,", new_height_back: ",x),console.log("[delay_set_container_width_height] new_max_width: ",I,", new_max_height: ",O)),a&&(I+=10,O+=10),b=Math.max(b,I,l),f=Math.max(f,O,h),debug[13]&&console.log("[delay_set_container_width_height] max_width: ",b,", max_height: ",f)}q.preview?(r.width(b).height(f),d.width(b).height(f)):i||document_qwiz_mobile||document_qwiz_force_mobile_f||(_.width(b).height(f),d.width(b).height(f),q.qwizard_b&&$("div.qcard_card-qdeck"+e).css({width:b+"px",height:f+"px"})),center_vertical(c,h),center_vertical(n,h);var D=d.parent().outerWidth();if(b>D){var P=D/b,E=Math.round(50*(1-P));d.css({transform:"scale("+P.toFixed(3)+") translate(-"+E+"%, -"+E+"%)"})}else d.css({transform:""})};setTimeout(o,300)}},this.got_it=function(e){if(!q.qwizard_b){var t=deckdata[e].i_card;deckdata[e].cards[t].got_it=!0,deckdata[e].n_to_go--}q.next_card(e,!0)},this.next_card=function(e,t){if(debug[0]&&console.log("[next_card] deckdata[i_deck].i_card:",deckdata[e].i_card),deckdata[e].bck_f)q.fwd_card(e,!1);else{var a=deckdata[e].i_card;if(void 0!==deckdata[e].hangman[a]&&!t){deckdata[e].answered_correctly[a]=!1;for(var d=deckdata[e].hangman[a],r=d.n_hangman,c=0;c<r;c++)d.hangman_n_hints[c]=1}if(deckdata[e].qrecord_id&&document_qwiz_user_logged_in_b){var n=(new Date).getTime()/1e3;t=t?1:0;var i={type:"flashcard",i_card:deckdata[e].dataset_id[a],unit:deckdata[e].unit[a],q_and_a_text:btoa(encodeURIComponent(deckdata[e].q_and_a_text[a])),first_flip_sec:deckdata[e].current_first_flip_sec,n_flips:deckdata[e].n_flips,first_textentry_sec:deckdata[e].current_first_textentry_sec,response:"",now_sec:n,got_it_f:t,confirm:"js"};qqc.jjax(qname,e,deckdata[e].qrecord_id,"record_qcard_v2",i)}deckdata[e].i_user_card=a;var _=deckdata[e].flip_axis,s=!1;_||(_=Math.random()>.5?"x":"y",s=Math.random()>.5),deckdata[e].$qcard_card.flip({axis:_,reverse:s}),!deckdata[e].pay_quiz_deck_id||"preview_questions"!=deckdata[e].pay_quiz_ok&&"preview_period_expired"!=deckdata[e].pay_quiz_ok&&"no_free_trial"!=deckdata[e].pay_quiz_ok||!qqc.preview_limit("deck",deckdata,e)?q.process_card(e):showing_front(e)||q.qdeck_flip(e)}},this.bck_card=function(e,t){if($(".bck-card-qdeck"+e).hasClass("hover")){var a;if(deckdata[e].bck_f=!0,t){if(deckdata[e].use_dataset&&deckdata[e].dataset_intro_f)return deckdata[e].saved_i_card=deckdata[e].i_card,$(".bck-card-qdeck"+e).css({color:"lightgray"}).removeClass("hover"),$(".fwd-card-qdeck"+e).css({color:"gray"}).addClass("hover"),$("span.card-number-qdeck"+e).html("--"),deckdata[e].i_card=-1,void q.display_login(e,!1,"use_dataset_options");a=deckdata[e].card_order[0]}else if(a=deckdata[e].i_user_card,-1==(a=deckdata[e].cards[a].i_user_prev_card))return;deckdata[e].i_user_card=a;var d=deckdata[e].cards[a];if(t||-1==d.i_user_prev_card){var r=$(".bck-card-qdeck"+e);deckdata[e].use_dataset&&deckdata[e].dataset_intro_f&&(r=r.last()),r.css({color:"lightgray"}).removeClass("hover")}var c=d.user_card_number;$("span.card-number-qdeck"+e).html(c),$(".fwd-card-qdeck"+e).css({color:"gray"}).addClass("hover"),deckdata[e].$next_buttons.css({visibility:"visible"}),deckdata[e].no_flip_b=!1,$("button.got_it-qdeck"+e).attr("disabled",!0).addClass("qwiz_button_disabled"),$("button.next_card-qdeck"+e).attr("disabled",!1).removeClass("qwiz_button_disabled"),deckdata[e].check_answer_disabled_b=!1,showing_front(e)||q.qdeck_flip(e),q.set_card_front_and_back(e,a,!1,!0)}},this.fwd_card=function(e,t){if($(".fwd-card-qdeck"+e).hasClass("hover")){var a;t?(-1==deckdata[e].i_card&&(deckdata[e].i_card=deckdata[e].saved_i_card),a=deckdata[e].i_card,deckdata[e].no_flip_b=!1,deckdata[e].$next_buttons.css({visibility:"visible"})):-1==deckdata[e].i_card?(a=deckdata[e].i_dataset_intro_user_next_card,deckdata[e].i_card=deckdata[e].saved_i_card,deckdata[e].no_flip_b=!1,deckdata[e].$next_buttons.css({visibility:"visible"})):(a=deckdata[e].i_user_card,a=deckdata[e].cards[a].i_user_next_card),deckdata[e].i_user_card=a;var d=deckdata[e].cards[a];if(a==deckdata[e].i_card){if(deckdata[e].bck_f=!1,$(".fwd-card-qdeck"+e).css({color:"lightgray"}).removeClass("hover"),deckdata[e].i_card==deckdata[e].n_cards)return void q.done(e);deckdata[e].card_reviewed_b?($("button.got_it-qdeck"+e).attr("disabled",!1).removeClass("qwiz_button_disabled"),deckdata[e].check_answer_disabled_b=!1):($("button.next_card-qdeck"+e).attr("disabled",!0).addClass("qwiz_button_disabled"),deckdata[e].check_answer_disabled_b=!0)}var r=d.user_card_number;$("span.card-number-qdeck"+e).html(r);var c=$(".bck-card-qdeck"+e);-1==d.i_user_prev_card&&(c=c.first()),c.css({color:"gray"}).addClass("hover"),showing_front(e)||q.qdeck_flip(e),q.set_card_front_and_back(e,a,!1,!0)}},this.shuffle_order=function(e){for(var t=deckdata[e].i_card,a=deckdata[e].card_order[t];;){var d=deckdata[e].card_order[t];if(d!=a&&!deckdata[e].cards[d].got_it)break;deckdata[e].card_order=shuffle(deckdata[e].card_order)}showing_front(e)||q.qdeck_flip(e),q.process_card(e)};var find_matching_terms=function(e,t){var a=e.term.toLowerCase(),d=qqc.metaphone(a);if(debug[6]&&console.log("[find_matching_terms] entry_metaphone; ",d),deckdata[textentry_i_deck].qrecord_id&&!deckdata[textentry_i_deck].current_first_textentry_sec){var r=(new Date).getTime()/1e3;deckdata[textentry_i_deck].current_first_textentry_sec=r}for(var c=100,n=100,i=deckdata[textentry_i_deck].i_card,_=deckdata[textentry_i_deck].cards[i],s=_.textentry_minlength,o=0;o<textentry_answer_metaphones[textentry_i_deck].length;o++)a[0]==textentry_answers[textentry_i_deck][o][0].toLowerCase()&&(c=Math.min(c,textentry_answers[textentry_i_deck][o].length),debug[6]&&console.log("[find_matching_terms] entry[0]:",a[0],", textentry_answers[textentry_i_deck][i][0]:",textentry_answers[textentry_i_deck][o][0])),d[0]==textentry_answer_metaphones[textentry_i_deck][o][0]&&(n=Math.min(n,textentry_answer_metaphones[textentry_i_deck][o].length),debug[6]&&console.log("[find_matching_terms] textentry_answer_metaphones[textentry_i_deck]["+o+"]:",textentry_answer_metaphones[textentry_i_deck][o],", textentry_answers[textentry_i_deck]["+o+"][0]:",textentry_answers[textentry_i_deck][o][0],", required_metaphone_length:",n));100==c?c=s:(c-=2,c=Math.min(s,c)),100!=n&&(--n<2?n=2:n>4&&(n=4)),debug[6]&&console.log("[find_matching_terms] required_entry_length:",c,", required_metaphone_length:",n);var l=a.replace(/(.)\1{2,}/gi,"$1");if(l.length<c&&d.length<n)textentry_matches[textentry_i_deck]=[];else if(debug[6]&&console.log("[find_matching_terms] request.term:",e.term,d,d.length),textentry_matches[textentry_i_deck]=$.map(current_card_textentry_terms_metaphones[textentry_i_deck],function(e){if(""==d?""==e[1]||0===e[0].toLowerCase().indexOf(a):0===e[1].indexOf(d)||0===e[0].toLowerCase().indexOf(a))return debug[6]&&console.log("[find_matching_terms] term_i:",e),e[0]}),debug[6]&&console.log("[find_matching_terms] textentry_matches[textentry_i_deck]:",textentry_matches[textentry_i_deck]),_.use_dict_b){var q,h=_.textentry_plural_b?1:0,k={action:"textentry_suggestions",entry:encodeURIComponent(a),entry_metaphone:encodeURIComponent(d),n_hints:deckdata[textentry_i_deck].textentry_n_hints,terms:btoa(encodeURIComponent(JSON.stringify(textentry_matches[textentry_i_deck]))),plural_f:h};q=qwizcards_page_f?qqc.get_qwiz_param("server_loc","http://qwizcards.com/admin")+"/qwizard_textentry_suggestions.php":qqc.get_qwiz_param("ajaxurl",""),$.ajax({type:"POST",url:q,data:k,dataType:"json",error:function(e,t){debug[0]&&console.log("[find_matching_terms] error desc:",t)},success:function(e){textentry_matches[textentry_i_deck]=e,find_matching_terms2(t,l)}})}else find_matching_terms2(t,l)};function find_matching_terms2(e,t){textentry_matches[textentry_i_deck].length&&(lc_textentry_matches[textentry_i_deck]=textentry_matches[textentry_i_deck].map(function(e){return e.toLowerCase()}),debug[6]&&console.log("[find_matching_terms2] textentry_matches[textentry_i_deck]:",textentry_matches[textentry_i_deck])),debug[6]&&console.log("[find_matching_terms] deduped_entry.length: ",t.length,", textentry_matches[textentry_i_deck].length: ",textentry_matches[textentry_i_deck].length,", deckdata[textentry_i_deck].textentry_n_hints: ",deckdata[textentry_i_deck].textentry_n_hints);var a=deckdata[textentry_i_deck].i_card,d=deckdata[textentry_i_deck].cards[a],r=d.textentry_minlength;if(t.length>=r&&deckdata[textentry_i_deck].textentry_n_hints<5){var c=d.all_choices[0];void 0!==lc_textentry_matches[textentry_i_deck]&&-1!=lc_textentry_matches[textentry_i_deck].indexOf(c)||$("#textentry_hint-qdeck"+textentry_i_deck).removeAttr("disabled").removeClass("qwiz_button_disabled").show()}e(textentry_matches[textentry_i_deck])}function menu_closed(e){var t=deckdata[textentry_i_deck].i_card,a=deckdata[textentry_i_deck].cards[t],d=e.target.value.toLowerCase(),r=deckdata[textentry_i_deck].textentry_n_hints;if(d.length<r){var c=a.all_choices[0].substr(0,r);e.target.value=c}(a.saved_textentry=e.target.value,deckdata[textentry_i_deck].check_answer_disabled_b||(debug[6]&&console.log("[menu_closed] textentry_matches[textentry_i_deck]: ",textentry_matches[textentry_i_deck]),lc_textentry_matches[textentry_i_deck]&&-1!=lc_textentry_matches[textentry_i_deck].indexOf(d)||($(button_flip_selector(textentry_i_deck)).addClass("qwiz_button_disabled"),deckdata[textentry_i_deck].check_answer_disabled_b=!0,a.saved_textentry_ok=!1)),show_hint_timeout[textentry_i_deck])&&($("input.textentry-qdeck"+textentry_i_deck).val().length>=a.textentry_minlength&&(clearTimeout(show_hint_timeout[textentry_i_deck]),show_hint_timeout[textentry_i_deck]=0))}function menu_shown(e){if(debug[0]&&(console.log("[menu_shown] textentry_i_deck:",textentry_i_deck,", document_qwiz_user_logged_in_b:",document_qwiz_user_logged_in_b),console.log("[menu_shown] deckdata[textentry_i_deck].record_start_b:",deckdata[textentry_i_deck].record_start_b)),deckdata[textentry_i_deck].record_start_b&&document_qwiz_user_logged_in_b){deckdata[textentry_i_deck].record_start_b=!1;var t=(new Date).getTime()/1e3,a={qrecord_id_ok:deckdata[textentry_i_deck].qrecord_id_ok,type:"start",now_sec:t,confirm:"js"};qqc.jjax(qname,textentry_i_deck,deckdata[textentry_i_deck].qrecord_id,"record_qcard_v2",a)}var d=e.target.value.toLowerCase(),r=deckdata[textentry_i_deck].i_card,c=deckdata[textentry_i_deck].cards[r],n=c.all_choices[0];if(-1!=lc_textentry_matches[textentry_i_deck].indexOf(n)&&$("#textentry_hint-qdeck"+textentry_i_deck).attr("disabled",!0).addClass("qwiz_button_disabled"),-1!=lc_textentry_matches[textentry_i_deck].indexOf(d)){var i=q.qwizard_b&&deckdata[i_deck].hide_flip_b?"Flip (click disabled)":"Flip";$(button_flip_selector(textentry_i_deck)).removeAttr("disabled").removeClass("qwiz_button_disabled").html(T(i)),c.check_answer=T(i),deckdata[textentry_i_deck].check_answer_disabled_b=!1}else c.check_answer=c.save_check_answer,$(button_flip_selector(textentry_i_deck)).addClass("qwiz_button_disabled").html(c.check_answer),deckdata[textentry_i_deck].check_answer_disabled_b=!0}function get_attr(e,t,a){var d=qqc.get_attr(e,t,a);return a&&!d&&(d=qqc.get_attr(e,t+"s")),d}function T(e){return qqc.T(e)}function Tplural(e,t,a){return qqc.Tplural(e,t,a)}this.item_selected=function(e){$(button_flip_selector(textentry_i_deck)).removeAttr("disabled").removeClass("qwiz_button_disabled").html(T("Flip")),deckdata[textentry_i_deck].check_answer_disabled_b=!1;var t=deckdata[textentry_i_deck].i_card,a=deckdata[textentry_i_deck].cards[t];a.saved_textentry=e.target.value,a.saved_textentry_ok=!0},this.keep_next_button_active=function(){next_button_active_b=!0,$("button.got_it").attr("disabled",!1).removeClass("qwiz_button_disabled");for(var e=0;e<n_decks;e++)deckdata[e].hide_gotit_b&&$("button.next_card-qdeck"+e).attr("disabled",!1).removeClass("qwiz_button_disabled")},this.get_deckdata=function(e,t){return deckdata[e][t]},this.set_deckdata=function(i_deck,variable,value){if(-1==i_deck){var s=variable+" = "+value;eval(s)}else deckdata[i_deck][variable]=value},this.set_carddata=function(e,t,a,d,r){debug[0]&&console.log("[set_carddata] i_card:",t,", variable:",a,", value:",d),void 0===r?deckdata[e].cards[t][a]=d:deckdata[e].cards[t][a][r]=d}};qcardf.call(qcard_),function(e){var t=function(t,a,d){this.setting={axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:".front",back:".back"},this.setting=e.extend(this.setting,a),"string"!=typeof a.axis||"x"!==a.axis.toLowerCase()&&"y"!==a.axis.toLowerCase()||(this.setting.axis=a.axis.toLowerCase()),"boolean"==typeof a.reverse&&(this.setting.reverse=a.reverse),"string"==typeof a.trigger&&(this.setting.trigger=a.trigger.toLowerCase());var r=parseInt(a.speed);isNaN(r)||(this.setting.speed=r),"boolean"==typeof a.forceHeight&&(this.setting.forceHeight=a.forceHeight),"boolean"==typeof a.forceWidth&&(this.setting.forceWidth=a.forceWidth),"boolean"==typeof a.autoSize&&(this.setting.autoSize=a.autoSize),("string"==typeof a.front||a.front instanceof e)&&(this.setting.front=a.front),("string"==typeof a.back||a.back instanceof e)&&(this.setting.back=a.back),this.element=t,this.frontElement=this.getFrontElement(),this.backElement=this.getBackElement(),this.isFlipped=!1,this.init(d)};e.extend(t.prototype,{flipDone:function(e){var t=this;t.element.one(function(){var e,t=document.createElement("fakeelement"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(void 0!==t.style[e])return a[e]}(),function(){t.element.trigger("flip:done"),"function"==typeof e&&e.call(t.element)})},flip:function(e){if(!this.isFlipped){this.isFlipped=!0;var t="rotate"+this.setting.axis;this.frontElement.css({transform:t+(this.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}),this.backElement.css({transform:t+"(0deg)","z-index":"1"}),this.flipDone(e)}},unflip:function(e){if(this.isFlipped){this.isFlipped=!1;var t="rotate"+this.setting.axis;this.frontElement.css({transform:t+"(0deg)","z-index":"1"}),this.backElement.css({transform:t+(this.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"}),this.flipDone(e)}},getFrontElement:function(){return this.setting.front instanceof e?this.setting.front:this.element.find(this.setting.front)},getBackElement:function(){return this.setting.back instanceof e?this.setting.back:this.element.find(this.setting.back)},init:function(e){var t=this,a=t.frontElement.add(t.backElement),d="rotate"+t.setting.axis,r=2*t.element["outer"+("rotatex"===d?"Height":"Width")](),c={perspective:r=Math.max(r,800),position:"relative"},n={transform:d+"("+(t.setting.reverse?"180deg":"-180deg")+")","z-index":"0",position:"relative"},i={"backface-visibility":"hidden","transform-style":"preserve-3d",position:"absolute","z-index":"1"};t.setting.forceHeight?a.outerHeight(t.element.height()):t.setting.autoSize&&(i.height="100%"),t.setting.forceWidth?a.outerWidth(t.element.width()):t.setting.autoSize&&(i.width="100%"),(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window&&(c["-webkit-transform-style"]="preserve-3d"),a.css(i).find("*").not("tbody").css({"backface-visibility":"hidden"}),t.element.css(c),t.backElement.css(n),setTimeout(function(){var d=t.setting.speed/1e3||.5;a.css({transition:"all "+d+"s ease-out"}),"function"==typeof e&&e.call(t.element)},20),t.attachEvents()},clickHandler:function(t){t||(t=window.event),this.element.find(e(t.target).closest('button, a, input[type="submit"]')).length||(this.isFlipped?this.unflip():this.flip())},hoverHandler:function(){var t=this;t.element.off("mouseleave.flip"),t.flip(),setTimeout(function(){t.element.on("mouseleave.flip",e.proxy(t.unflip,t)),t.element.is(":hover")||t.unflip()},t.setting.speed+150)},attachEvents:function(){"click"===this.setting.trigger?this.element.on(e.fn.tap?"tap.flip":"click.flip",e.proxy(this.clickHandler,this)):"hover"===this.setting.trigger&&(this.element.on("mouseenter.flip",e.proxy(this.hoverHandler,this)),this.element.on("mouseleave.flip",e.proxy(this.unflip,this)))},flipChanged:function(e){this.element.trigger("flip:change"),"function"==typeof e&&e.call(this.element)},changeSettings:function(e,t){var a=this,d=!1;if(void 0!==e.axis&&a.setting.axis!==e.axis.toLowerCase()&&(a.setting.axis=e.axis.toLowerCase(),d=!0),void 0!==e.reverse&&a.setting.reverse!==e.reverse&&(a.setting.reverse=e.reverse,d=!0),d){var r=a.frontElement.add(a.backElement),c=r.css(["transition-property","transition-timing-function","transition-duration","transition-delay"]);r.css({transition:"none"});var n="rotate"+a.setting.axis;a.isFlipped?a.frontElement.css({transform:n+(a.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}):a.backElement.css({transform:n+(a.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"}),setTimeout(function(){r.css(c),a.flipChanged(t)},0)}else a.flipChanged(t)}}),e.fn.flip=function(a,d){return"function"==typeof a&&(d=a),"string"==typeof a||"boolean"==typeof a?this.each(function(){var t=e(this).data("flip-model");"toggle"===a&&(a=!t.isFlipped),a?t.flip(d):t.unflip(d)}):this.each(function(){if(e(this).data("flip-model")){var r=e(this).data("flip-model");!a||void 0===a.axis&&void 0===a.reverse||r.changeSettings(a,d)}else e(this).data("flip-model",new t(e(this),a||{},d))}),this}}(jQuery);